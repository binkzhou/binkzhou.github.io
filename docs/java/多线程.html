<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>多线程 | 我的笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/docs/assets/css/0.styles.52bb2005.css" as="style"><link rel="preload" href="/docs/assets/js/app.7890f91e.js" as="script"><link rel="preload" href="/docs/assets/js/2.a8bc3a53.js" as="script"><link rel="preload" href="/docs/assets/js/28.6b5d3991.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.6d1a44dc.js"><link rel="prefetch" href="/docs/assets/js/11.88b33277.js"><link rel="prefetch" href="/docs/assets/js/12.d888dad3.js"><link rel="prefetch" href="/docs/assets/js/13.f4b320f4.js"><link rel="prefetch" href="/docs/assets/js/14.affc25d2.js"><link rel="prefetch" href="/docs/assets/js/15.f3f21810.js"><link rel="prefetch" href="/docs/assets/js/16.20cfbcd3.js"><link rel="prefetch" href="/docs/assets/js/17.8fa60e8f.js"><link rel="prefetch" href="/docs/assets/js/18.220db854.js"><link rel="prefetch" href="/docs/assets/js/19.c6db72e7.js"><link rel="prefetch" href="/docs/assets/js/20.121df49a.js"><link rel="prefetch" href="/docs/assets/js/21.b9b44369.js"><link rel="prefetch" href="/docs/assets/js/22.a7d81dee.js"><link rel="prefetch" href="/docs/assets/js/23.05a4db07.js"><link rel="prefetch" href="/docs/assets/js/24.0e35ee22.js"><link rel="prefetch" href="/docs/assets/js/25.9c3e07da.js"><link rel="prefetch" href="/docs/assets/js/26.6dcfef0f.js"><link rel="prefetch" href="/docs/assets/js/27.6ad8c329.js"><link rel="prefetch" href="/docs/assets/js/29.407c6de9.js"><link rel="prefetch" href="/docs/assets/js/3.3ddcfe9a.js"><link rel="prefetch" href="/docs/assets/js/30.34551e96.js"><link rel="prefetch" href="/docs/assets/js/31.47783344.js"><link rel="prefetch" href="/docs/assets/js/32.c6f4cea4.js"><link rel="prefetch" href="/docs/assets/js/33.03d5e501.js"><link rel="prefetch" href="/docs/assets/js/34.0ca4e267.js"><link rel="prefetch" href="/docs/assets/js/35.e999eeee.js"><link rel="prefetch" href="/docs/assets/js/36.544af633.js"><link rel="prefetch" href="/docs/assets/js/37.9e0cc013.js"><link rel="prefetch" href="/docs/assets/js/38.1c3df97c.js"><link rel="prefetch" href="/docs/assets/js/39.9ce8a5f7.js"><link rel="prefetch" href="/docs/assets/js/4.72d66176.js"><link rel="prefetch" href="/docs/assets/js/40.323e7e25.js"><link rel="prefetch" href="/docs/assets/js/41.9440b8ee.js"><link rel="prefetch" href="/docs/assets/js/42.959d789d.js"><link rel="prefetch" href="/docs/assets/js/43.1a427e6d.js"><link rel="prefetch" href="/docs/assets/js/44.9adaa5b6.js"><link rel="prefetch" href="/docs/assets/js/45.b70993ab.js"><link rel="prefetch" href="/docs/assets/js/46.bc570f17.js"><link rel="prefetch" href="/docs/assets/js/47.954dd27f.js"><link rel="prefetch" href="/docs/assets/js/48.72d2a29d.js"><link rel="prefetch" href="/docs/assets/js/49.7ddfd074.js"><link rel="prefetch" href="/docs/assets/js/5.5087e4f8.js"><link rel="prefetch" href="/docs/assets/js/50.2684a6e6.js"><link rel="prefetch" href="/docs/assets/js/51.00572c60.js"><link rel="prefetch" href="/docs/assets/js/52.5a70be73.js"><link rel="prefetch" href="/docs/assets/js/53.9f6156b6.js"><link rel="prefetch" href="/docs/assets/js/54.9efed889.js"><link rel="prefetch" href="/docs/assets/js/55.78300585.js"><link rel="prefetch" href="/docs/assets/js/56.e33be804.js"><link rel="prefetch" href="/docs/assets/js/57.0c404d88.js"><link rel="prefetch" href="/docs/assets/js/58.2f99406b.js"><link rel="prefetch" href="/docs/assets/js/59.b7a3347e.js"><link rel="prefetch" href="/docs/assets/js/6.7a9273f7.js"><link rel="prefetch" href="/docs/assets/js/60.f14f3fe9.js"><link rel="prefetch" href="/docs/assets/js/61.f770fcc5.js"><link rel="prefetch" href="/docs/assets/js/62.9a22eb9a.js"><link rel="prefetch" href="/docs/assets/js/63.94b2ea39.js"><link rel="prefetch" href="/docs/assets/js/64.e2bf811b.js"><link rel="prefetch" href="/docs/assets/js/65.74d494f9.js"><link rel="prefetch" href="/docs/assets/js/66.a375bb32.js"><link rel="prefetch" href="/docs/assets/js/67.3c201101.js"><link rel="prefetch" href="/docs/assets/js/68.f2c6c1f4.js"><link rel="prefetch" href="/docs/assets/js/69.268faa44.js"><link rel="prefetch" href="/docs/assets/js/7.1a3a696f.js"><link rel="prefetch" href="/docs/assets/js/70.6f4df6a6.js"><link rel="prefetch" href="/docs/assets/js/71.37964dc5.js"><link rel="prefetch" href="/docs/assets/js/72.eef27e2e.js"><link rel="prefetch" href="/docs/assets/js/73.d7a9dbd9.js"><link rel="prefetch" href="/docs/assets/js/74.f2040aa6.js"><link rel="prefetch" href="/docs/assets/js/75.9f939c37.js"><link rel="prefetch" href="/docs/assets/js/76.b1358302.js"><link rel="prefetch" href="/docs/assets/js/77.83a2c6b3.js"><link rel="prefetch" href="/docs/assets/js/78.34149b3d.js"><link rel="prefetch" href="/docs/assets/js/79.fde21713.js"><link rel="prefetch" href="/docs/assets/js/8.9fb3aa96.js"><link rel="prefetch" href="/docs/assets/js/80.6461e24e.js"><link rel="prefetch" href="/docs/assets/js/81.e6c53d45.js"><link rel="prefetch" href="/docs/assets/js/82.19506b41.js"><link rel="prefetch" href="/docs/assets/js/83.b39f337e.js"><link rel="prefetch" href="/docs/assets/js/84.6dae4be4.js"><link rel="prefetch" href="/docs/assets/js/85.862470ad.js"><link rel="prefetch" href="/docs/assets/js/86.6121868f.js"><link rel="prefetch" href="/docs/assets/js/87.7c0c10bf.js"><link rel="prefetch" href="/docs/assets/js/88.24fd0017.js"><link rel="prefetch" href="/docs/assets/js/9.24bd0981.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.52bb2005.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">我的笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/docs/javascrip/" class="nav-link">
  JavaScrip
</a></li><li class="dropdown-item"><!----> <a href="/docs/typescrip/" class="nav-link">
  TypeScrip
</a></li><li class="dropdown-item"><!----> <a href="/docs/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/docs/hook/" class="nav-link">
  Hook
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/docs/webpack/" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/docs/mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/docs/j2ee/" class="nav-link">
  J2EE
</a></li><li class="dropdown-item"><!----> <a href="/docs/ssm/" class="nav-link">
  SSM
</a></li></ul></div></div><div class="nav-item"><a href="/docs/efficiency/1.常用网站.html" class="nav-link">
  随记
</a></div><div class="nav-item"><a href="/docs/collection/1.立即执行函数.html" class="nav-link">
  收藏
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/docs/javascrip/" class="nav-link">
  JavaScrip
</a></li><li class="dropdown-item"><!----> <a href="/docs/typescrip/" class="nav-link">
  TypeScrip
</a></li><li class="dropdown-item"><!----> <a href="/docs/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/docs/hook/" class="nav-link">
  Hook
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/docs/webpack/" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/docs/mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/docs/j2ee/" class="nav-link">
  J2EE
</a></li><li class="dropdown-item"><!----> <a href="/docs/ssm/" class="nav-link">
  SSM
</a></li></ul></div></div><div class="nav-item"><a href="/docs/efficiency/1.常用网站.html" class="nav-link">
  随记
</a></div><div class="nav-item"><a href="/docs/collection/1.立即执行函数.html" class="nav-link">
  收藏
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/java/" aria-current="page" class="sidebar-link">常用API</a></li><li><a href="/docs/java/File类.html" class="sidebar-link">File类</a></li><li><a href="/docs/java/IO流.html" class="sidebar-link">IO流</a></li><li><a href="/docs/java/集合.html" class="sidebar-link">集合</a></li><li><a href="/docs/java/JDBC.html" class="sidebar-link">JDBC</a></li><li><a href="/docs/java/反射和注解.html" class="sidebar-link">反射和注解</a></li><li><a href="/docs/java/继承.html" class="sidebar-link">继承</a></li><li><a href="/docs/java/抽象类.html" class="sidebar-link">抽象类</a></li><li><a href="/docs/java/多态.html" class="sidebar-link">多态</a></li><li><a href="/docs/java/接口.html" class="sidebar-link">接口</a></li><li><a href="/docs/java/final关键字.html" class="sidebar-link">final关键字</a></li><li><a href="/docs/java/内部类.html" class="sidebar-link">内部类</a></li><li><a href="/docs/java/权限修饰符.html" class="sidebar-link">权限修饰符</a></li><li><a href="/docs/java/网络编程.html" class="sidebar-link">网络编程</a></li><li><a href="/docs/java/异常.html" class="sidebar-link">异常</a></li><li><a href="/docs/java/引用类型.html" class="sidebar-link">引用类型</a></li><li><a href="/docs/java/多线程.html" class="active sidebar-link">多线程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#启动一个线程" class="sidebar-link">启动一个线程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#创建多线程-继承线程类" class="sidebar-link">创建多线程-继承线程类</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#创建多线程-实现runnable接口" class="sidebar-link">创建多线程-实现Runnable接口</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#创建多线程-匿名类" class="sidebar-link">创建多线程-匿名类</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#常见的线程方法" class="sidebar-link">常见的线程方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#sleep当前线程暂停" class="sidebar-link">sleep当前线程暂停</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#join加入到当前线程中" class="sidebar-link">join加入到当前线程中</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#线程优先级" class="sidebar-link">线程优先级</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#临时暂停" class="sidebar-link">临时暂停</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#守护线程" class="sidebar-link">守护线程</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#多线程同步" class="sidebar-link">多线程同步</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#演示同步问题" class="sidebar-link">演示同步问题</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#分析同步问题产生的原因" class="sidebar-link">分析同步问题产生的原因</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#解决思路" class="sidebar-link">解决思路</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#synchronized-同步对象概念" class="sidebar-link">synchronized 同步对象概念</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#使用synchronized-解决同步问题" class="sidebar-link">使用synchronized 解决同步问题</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#使用hero对象作为同步对象" class="sidebar-link">使用hero对象作为同步对象</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#在方法前-加上修饰符synchronized" class="sidebar-link">在方法前，加上修饰符synchronized</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#线程安全的类" class="sidebar-link">线程安全的类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#hashmap和hashtable的区别" class="sidebar-link">HashMap和Hashtable的区别</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#stringbuffer和stringbuilder的区别" class="sidebar-link">StringBuffer和StringBuilder的区别</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#arraylist和vector的区别" class="sidebar-link">ArrayList和Vector的区别</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#把非线程安全的集合转换为线程安全" class="sidebar-link">把非线程安全的集合转换为线程安全</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#线程死锁" class="sidebar-link">线程死锁</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#演示死锁" class="sidebar-link">演示死锁</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#线程之间的交互" class="sidebar-link">线程之间的交互</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#使用wait和notify进行线程交互" class="sidebar-link">使用wait和notify进行线程交互</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#关于wait、notify和notifyall" class="sidebar-link">关于wait、notify和notifyAll</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#线程池" class="sidebar-link">线程池</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#线程池设计思路" class="sidebar-link">线程池设计思路</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#开发一个自定义线程池" class="sidebar-link">开发一个自定义线程池</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#测试线程池" class="sidebar-link">测试线程池</a></li><li class="sidebar-sub-header"><a href="/docs/java/多线程.html#使用java自带线程池" class="sidebar-link">使用java自带线程池</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="启动一个线程"><a href="#启动一个线程" class="header-anchor">#</a> 启动一个线程</h2> <h3 id="创建多线程-继承线程类"><a href="#创建多线程-继承线程类" class="header-anchor">#</a> 创建多线程-继承线程类</h3> <p>使用多线程，就可以做到盖伦在攻击提莫的同时，赏金猎人也在攻击盲僧
设计一个类KillThread 继承Thread，并且重写run方法
启动线程办法： 实例化一个KillThread对象，并且调用其start方法
就可以观察到 赏金猎人攻击盲僧的同时，盖伦也在攻击提莫</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
 
<span class="token keyword">import</span> <span class="token namespace">charactor<span class="token punctuation">.</span></span><span class="token class-name">Hero</span><span class="token punctuation">;</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KillThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span><span class="token punctuation">{</span>
     
    <span class="token keyword">private</span> <span class="token class-name">Hero</span> h1<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Hero</span> h2<span class="token punctuation">;</span>
 
    <span class="token keyword">public</span> <span class="token class-name">KillThread</span><span class="token punctuation">(</span><span class="token class-name">Hero</span> h1<span class="token punctuation">,</span> <span class="token class-name">Hero</span> h2<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h1 <span class="token operator">=</span> h1<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h2 <span class="token operator">=</span> h2<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>h2<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            h1<span class="token punctuation">.</span><span class="token function">attackHero</span><span class="token punctuation">(</span>h2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>测试线程</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
 
<span class="token keyword">import</span> <span class="token namespace">charactor<span class="token punctuation">.</span></span><span class="token class-name">Hero</span><span class="token punctuation">;</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
 
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         
        <span class="token class-name">Hero</span> gareen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;盖伦&quot;</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">616</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
 
        <span class="token class-name">Hero</span> teemo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;提莫&quot;</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
         
        <span class="token class-name">Hero</span> bh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;赏金猎人&quot;</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">65</span><span class="token punctuation">;</span>
         
        <span class="token class-name">Hero</span> leesin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;盲僧&quot;</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">455</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">;</span>
         
        <span class="token class-name">KillThread</span> killThread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KillThread</span><span class="token punctuation">(</span>gareen<span class="token punctuation">,</span>teemo<span class="token punctuation">)</span><span class="token punctuation">;</span>
        killThread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">KillThread</span> killThread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KillThread</span><span class="token punctuation">(</span>bh<span class="token punctuation">,</span>leesin<span class="token punctuation">)</span><span class="token punctuation">;</span>
        killThread2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         
    <span class="token punctuation">}</span>
     
<span class="token punctuation">}</span>
</code></pre></div><h3 id="创建多线程-实现runnable接口"><a href="#创建多线程-实现runnable接口" class="header-anchor">#</a> 创建多线程-实现Runnable接口</h3> <p>创建类Battle，实现Runnable接口
启动的时候，首先创建一个Battle对象，然后再根据该battle对象创建一个线程对象，并启动</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Battle</span> battle1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Battle</span><span class="token punctuation">(</span>gareen<span class="token punctuation">,</span>teemo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>battle1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>battle1 对象实现了Runnable接口，所以有run方法，但是直接调用run方法，并不会启动一个新的线程。
必须，借助一个线程对象的start()方法，才会启动一个新的线程。
所以，在创建Thread对象的时候，把battle1作为构造方法的参数传递进去，这个线程启动的时候，就会去执行battle1.run()方法了。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
 
<span class="token keyword">import</span> <span class="token namespace">charactor<span class="token punctuation">.</span></span><span class="token class-name">Hero</span><span class="token punctuation">;</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Battle</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>
     
    <span class="token keyword">private</span> <span class="token class-name">Hero</span> h1<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Hero</span> h2<span class="token punctuation">;</span>
 
    <span class="token keyword">public</span> <span class="token class-name">Battle</span><span class="token punctuation">(</span><span class="token class-name">Hero</span> h1<span class="token punctuation">,</span> <span class="token class-name">Hero</span> h2<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h1 <span class="token operator">=</span> h1<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h2 <span class="token operator">=</span> h2<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>h2<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            h1<span class="token punctuation">.</span><span class="token function">attackHero</span><span class="token punctuation">(</span>h2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>测试线程</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
 
<span class="token keyword">import</span> <span class="token namespace">charactor<span class="token punctuation">.</span></span><span class="token class-name">Hero</span><span class="token punctuation">;</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
 
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         
        <span class="token class-name">Hero</span> gareen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;盖伦&quot;</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">616</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
 
        <span class="token class-name">Hero</span> teemo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;提莫&quot;</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
         
        <span class="token class-name">Hero</span> bh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;赏金猎人&quot;</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">65</span><span class="token punctuation">;</span>
         
        <span class="token class-name">Hero</span> leesin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;盲僧&quot;</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">455</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">;</span>
         
        <span class="token class-name">Battle</span> battle1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Battle</span><span class="token punctuation">(</span>gareen<span class="token punctuation">,</span>teemo<span class="token punctuation">)</span><span class="token punctuation">;</span>
         
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>battle1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token class-name">Battle</span> battle2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Battle</span><span class="token punctuation">(</span>bh<span class="token punctuation">,</span>leesin<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>battle2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token punctuation">}</span>
     
<span class="token punctuation">}</span>
</code></pre></div><h3 id="创建多线程-匿名类"><a href="#创建多线程-匿名类" class="header-anchor">#</a> 创建多线程-匿名类</h3> <p>使用匿名类，继承Thread,重写run方法，直接在run方法中写业务代码
匿名类的一个好处是可以很方便的访问外部的局部变量。
前提是外部的局部变量需要被声明为final。(JDK7以后就不需要了)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
  
<span class="token keyword">import</span> <span class="token namespace">charactor<span class="token punctuation">.</span></span><span class="token class-name">Hero</span><span class="token punctuation">;</span>
  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
  
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          
        <span class="token class-name">Hero</span> gareen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;盖伦&quot;</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">616</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
  
        <span class="token class-name">Hero</span> teemo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;提莫&quot;</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
          
        <span class="token class-name">Hero</span> bh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;赏金猎人&quot;</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">65</span><span class="token punctuation">;</span>
          
        <span class="token class-name">Hero</span> leesin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;盲僧&quot;</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">455</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">;</span>
          
        <span class="token comment">//匿名类</span>
        <span class="token class-name">Thread</span> t1<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//匿名类中用到外部的局部变量teemo，必须把teemo声明为final</span>
                <span class="token comment">//但是在JDK7以后，就不是必须加final的了</span>
                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>teemo<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    gareen<span class="token punctuation">.</span><span class="token function">attackHero</span><span class="token punctuation">(</span>teemo<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>              
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
         
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          
        <span class="token class-name">Thread</span> t2<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>leesin<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    bh<span class="token punctuation">.</span><span class="token function">attackHero</span><span class="token punctuation">(</span>leesin<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>              
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         
    <span class="token punctuation">}</span>
      
<span class="token punctuation">}</span>
</code></pre></div><h2 id="常见的线程方法"><a href="#常见的线程方法" class="header-anchor">#</a> 常见的线程方法</h2> <h3 id="sleep当前线程暂停"><a href="#sleep当前线程暂停" class="header-anchor">#</a> sleep当前线程暂停</h3> <p>Thread.sleep(1000); 表示当前线程暂停1000毫秒 ，其他线程不受影响
Thread.sleep(1000); 会抛出InterruptedException 中断异常，因为当前线程sleep的时候，有可能被停止，这时就会抛出 InterruptedException</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
 
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         
        <span class="token class-name">Thread</span> t1<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">int</span> seconds <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// TODO Auto-generated catch block</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;已经玩了LOL %d 秒%n&quot;</span><span class="token punctuation">,</span> seconds<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>              
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         
    <span class="token punctuation">}</span>
     
<span class="token punctuation">}</span>
</code></pre></div><h3 id="join加入到当前线程中"><a href="#join加入到当前线程中" class="header-anchor">#</a> join加入到当前线程中</h3> <p>首先解释一下主线程的概念
所有进程，至少会有一个线程即主线程，即main方法开始执行，就会有一个看不见的主线程存在。
在42行执行t.join，即表明在主线程中加入该线程。
主线程会等待该线程结束完毕， 才会往下运行。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
  
<span class="token keyword">import</span> <span class="token namespace">charactor<span class="token punctuation">.</span></span><span class="token class-name">Hero</span><span class="token punctuation">;</span>
  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
  
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> gareen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;盖伦&quot;</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">616</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
  
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> teemo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;提莫&quot;</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
          
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> bh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;赏金猎人&quot;</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">65</span><span class="token punctuation">;</span>
          
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> leesin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;盲僧&quot;</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">455</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">;</span>
          
        <span class="token class-name">Thread</span> t1<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>teemo<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    gareen<span class="token punctuation">.</span><span class="token function">attackHero</span><span class="token punctuation">(</span>teemo<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>              
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
          
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token comment">//代码执行到这里，一直是main线程在运行</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//t1线程加入到main线程中来，只有t1线程运行结束，才会继续往下走</span>
            t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// TODO Auto-generated catch block</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
        <span class="token class-name">Thread</span> t2<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>leesin<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    bh<span class="token punctuation">.</span><span class="token function">attackHero</span><span class="token punctuation">(</span>leesin<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>              
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">//会观察到盖伦把提莫杀掉后，才运行t2线程</span>
        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          
    <span class="token punctuation">}</span>
      
<span class="token punctuation">}</span>
</code></pre></div><h3 id="线程优先级"><a href="#线程优先级" class="header-anchor">#</a> 线程优先级</h3> <p>当线程处于竞争关系的时候，优先级高的线程会有更大的几率获得CPU资源
为了演示该效果，要把暂停时间去掉，多条线程各自会尽力去占有CPU资源
同时把英雄的血量增加100倍，攻击减低到1，才有足够的时间观察到优先级的演示
如图可见，线程1的优先级是MAX_PRIORITY，所以它争取到了更多的CPU资源执行代码</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">charactor</span><span class="token punctuation">;</span>
  
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span><span class="token punctuation">;</span>
   
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Hero</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">float</span> hp<span class="token punctuation">;</span>
      
    <span class="token keyword">public</span> <span class="token keyword">int</span> damage<span class="token punctuation">;</span>
      
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attackHero</span><span class="token punctuation">(</span><span class="token class-name">Hero</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//把暂停时间去掉，多条线程各自会尽力去占有CPU资源</span>
        <span class="token comment">//线程的优先级效果才可以看得出来</span>
<span class="token comment">//        try {</span>
<span class="token comment">//           </span>
<span class="token comment">//            Thread.sleep(0);</span>
<span class="token comment">//        } catch (InterruptedException e) {</span>
<span class="token comment">//            // TODO Auto-generated catch block</span>
<span class="token comment">//            e.printStackTrace();</span>
<span class="token comment">//        }</span>
        h<span class="token punctuation">.</span>hp<span class="token operator">-=</span>damage<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%s 正在攻击 %s, %s的血变成了 %.0f%n&quot;</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>h<span class="token punctuation">.</span>name<span class="token punctuation">,</span>h<span class="token punctuation">.</span>name<span class="token punctuation">,</span>h<span class="token punctuation">.</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
          
        <span class="token keyword">if</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>name <span class="token operator">+</span><span class="token string">&quot;死了！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token operator">&gt;=</span>hp<span class="token operator">?</span><span class="token boolean">true</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span>
</code></pre></div><p><strong>测试代码</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
  
<span class="token keyword">import</span> <span class="token namespace">charactor<span class="token punctuation">.</span></span><span class="token class-name">Hero</span><span class="token punctuation">;</span>
  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
  
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> gareen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;盖伦&quot;</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">6160</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> teemo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;提莫&quot;</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
          
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> bh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;赏金猎人&quot;</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">5000</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
          
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> leesin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;盲僧&quot;</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">4505</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
          
        <span class="token class-name">Thread</span> t1<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 
                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>teemo<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    gareen<span class="token punctuation">.</span><span class="token function">attackHero</span><span class="token punctuation">(</span>teemo<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>              
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
          
        <span class="token class-name">Thread</span> t2<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>leesin<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    bh<span class="token punctuation">.</span><span class="token function">attackHero</span><span class="token punctuation">(</span>leesin<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>              
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
         
        t1<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>MAX_PRIORITY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>MIN_PRIORITY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          
    <span class="token punctuation">}</span>
      
<span class="token punctuation">}</span>
</code></pre></div><h3 id="临时暂停"><a href="#临时暂停" class="header-anchor">#</a> 临时暂停</h3> <p>当前线程，临时暂停，使得其他线程可以有更多的机会占用CPU资源</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
  
<span class="token keyword">import</span> <span class="token namespace">charactor<span class="token punctuation">.</span></span><span class="token class-name">Hero</span><span class="token punctuation">;</span>
  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
  
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> gareen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;盖伦&quot;</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">61600</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> teemo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;提莫&quot;</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">30000</span><span class="token punctuation">;</span>
        teemo<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
          
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> bh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;赏金猎人&quot;</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">50000</span><span class="token punctuation">;</span>
        bh<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
          
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> leesin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;盲僧&quot;</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">45050</span><span class="token punctuation">;</span>
        leesin<span class="token punctuation">.</span>damage <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
          
        <span class="token class-name">Thread</span> t1<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 
                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>teemo<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    gareen<span class="token punctuation">.</span><span class="token function">attackHero</span><span class="token punctuation">(</span>teemo<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>              
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
          
        <span class="token class-name">Thread</span> t2<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>leesin<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token comment">//临时暂停，使得t1可以占用CPU资源</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                     
                    bh<span class="token punctuation">.</span><span class="token function">attackHero</span><span class="token punctuation">(</span>leesin<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>              
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
         
        t1<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          
    <span class="token punctuation">}</span>
      
<span class="token punctuation">}</span>
</code></pre></div><h3 id="守护线程"><a href="#守护线程" class="header-anchor">#</a> 守护线程</h3> <p>守护线程的概念是： 当一个进程里，所有的线程都是守护线程的时候，结束当前进程。</p> <p>就好像一个公司有销售部，生产部这些和业务挂钩的部门。</p> <p>除此之外，还有后勤，行政等这些支持部门。</p> <p>如果一家公司销售部，生产部都解散了，那么只剩下后勤和行政，那么这家公司也可以解散了。</p> <p>守护线程就相当于那些支持部门，如果一个进程只剩下守护线程，那么进程就会自动结束。</p> <p>守护线程通常会被用来做日志，性能统计等工作</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
  
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          
        <span class="token class-name">Thread</span> t1<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">int</span> seconds <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
                 
                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// TODO Auto-generated catch block</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;已经玩了LOL %d 秒%n&quot;</span><span class="token punctuation">,</span> seconds<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                     
                <span class="token punctuation">}</span>              
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          
    <span class="token punctuation">}</span>
      
<span class="token punctuation">}</span>
</code></pre></div><h2 id="多线程同步"><a href="#多线程同步" class="header-anchor">#</a> 多线程同步</h2> <h3 id="演示同步问题"><a href="#演示同步问题" class="header-anchor">#</a> 演示同步问题</h3> <p>假设盖伦有10000滴血，并且在基地里，同时又被对方多个英雄攻击
就是<strong>有多个线程在减少盖伦的hp</strong>
同时又有<strong>多个线程在恢复盖伦的hp</strong>
假设线程的数量是一样的，并且每次改变的值都是1，那么所有线程结束后，盖伦应该还是10000滴血。
但是。。。</p> <p><strong>注意</strong>： 不是每一次运行都会看到错误的数据产生，多运行几次，或者增加运行的次数</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">charactor</span><span class="token punctuation">;</span>
  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Hero</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">float</span> hp<span class="token punctuation">;</span>
     
    <span class="token keyword">public</span> <span class="token keyword">int</span> damage<span class="token punctuation">;</span>
     
    <span class="token comment">//回血</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        hp<span class="token operator">=</span>hp<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
     
    <span class="token comment">//掉血</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hurt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        hp<span class="token operator">=</span>hp<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
     
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attackHero</span><span class="token punctuation">(</span><span class="token class-name">Hero</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        h<span class="token punctuation">.</span>hp<span class="token operator">-=</span>damage<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%s 正在攻击 %s, %s的血变成了 %.0f%n&quot;</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>h<span class="token punctuation">.</span>name<span class="token punctuation">,</span>h<span class="token punctuation">.</span>name<span class="token punctuation">,</span>h<span class="token punctuation">.</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>name <span class="token operator">+</span><span class="token string">&quot;死了！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token operator">&gt;=</span>hp<span class="token operator">?</span><span class="token boolean">true</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span>
</code></pre></div><p><strong>测试类</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
    
<span class="token keyword">import</span> <span class="token namespace">charactor<span class="token punctuation">.</span></span><span class="token class-name">Hero</span><span class="token punctuation">;</span>
    
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> gareen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;盖伦&quot;</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>
           
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;盖伦的初始血量是 %.0f%n&quot;</span><span class="token punctuation">,</span> gareen<span class="token punctuation">.</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
           
        <span class="token comment">//多线程同步问题指的是多个线程同时修改一个数据的时候，导致的问题</span>
           
        <span class="token comment">//假设盖伦有10000滴血，并且在基地里，同时又被对方多个英雄攻击</span>
           
        <span class="token comment">//用JAVA代码来表示，就是有多个线程在减少盖伦的hp</span>
        <span class="token comment">//同时又有多个线程在恢复盖伦的hp</span>
           
        <span class="token comment">//n个线程增加盖伦的hp</span>
           
        <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>
   
        <span class="token class-name">Thread</span><span class="token punctuation">[</span><span class="token punctuation">]</span> addThreads <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span><span class="token punctuation">[</span><span class="token punctuation">]</span> reduceThreads <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
           
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    gareen<span class="token punctuation">.</span><span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// TODO Auto-generated catch block</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            addThreads<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
               
        <span class="token punctuation">}</span>
           
        <span class="token comment">//n个线程减少盖伦的hp</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    gareen<span class="token punctuation">.</span><span class="token function">hurt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// TODO Auto-generated catch block</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            reduceThreads<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
           
        <span class="token comment">//等待所有增加线程结束</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span> t <span class="token operator">:</span> addThreads<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// TODO Auto-generated catch block</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//等待所有减少线程结束</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span> t <span class="token operator">:</span> reduceThreads<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// TODO Auto-generated catch block</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
           
        <span class="token comment">//代码执行到这里，所有增加和减少线程都结束了</span>
           
        <span class="token comment">//增加和减少线程的数量是一样的，每次都增加，减少1.</span>
        <span class="token comment">//那么所有线程都结束后，盖伦的hp应该还是初始值</span>
           
        <span class="token comment">//但是事实上观察到的是：</span>
                   
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d个增加线程和%d个减少线程结束后%n盖伦的血量变成了 %.0f%n&quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span>n<span class="token punctuation">,</span>gareen<span class="token punctuation">.</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
           
    <span class="token punctuation">}</span>
        
<span class="token punctuation">}</span>
</code></pre></div><h3 id="分析同步问题产生的原因"><a href="#分析同步问题产生的原因" class="header-anchor">#</a> 分析同步问题产生的原因</h3> <ol><li>假设增加线程先进入，得到的hp是10000</li> <li>进行增加运算</li> <li>正在做增加运算的时候，还没有来得及修改hp的值，减少线程来了</li> <li>减少线程得到的hp的值也是10000</li> <li>减少线程进行减少运算</li> <li>增加线程运算结束，得到值10001，并把这个值赋予hp</li> <li>减少线程也运算结束，得到值9999，并把这个值赋予hp
hp，最后的值就是9999
虽然经历了两个线程各自增减了一次，本来期望还是原值10000，但是却得到了一个9999
这个时候的值9999是一个错误的值，在业务上又叫做脏数据</li></ol> <p><img src="/docs/assets/img/787.f0df753e.png" alt="分析同步问题产生的原因"></p> <h3 id="解决思路"><a href="#解决思路" class="header-anchor">#</a> 解决思路</h3> <p>总体解决思路是： 在增加线程访问hp期间，其他线程不可以访问hp</p> <ol><li>增加线程获取到hp的值，并进行运算</li> <li>在运算期间，减少线程试图来获取hp的值，但是不被允许</li> <li>增加线程运算结束，并成功修改hp的值为10001</li> <li>减少线程，在增加线程做完后，才能访问hp的值，即10001</li> <li>减少线程运算，并得到新的值10000</li></ol> <p><img src="/docs/assets/img/788.5ba52c70.png" alt="解决思路"></p> <h3 id="synchronized-同步对象概念"><a href="#synchronized-同步对象概念" class="header-anchor">#</a> synchronized 同步对象概念</h3> <p>解决上述问题之前，先理解
<strong>synchronized</strong>关键字的意义
如下代码</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Object</span> someObject <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">synchronized</span> <span class="token punctuation">(</span>someObject<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//此处的代码只有占有了someObject后才可以执行</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>synchronized表示当前线程，独占 对象 someObject</strong>
当前线程<strong>独占</strong> 了对象someObject，如果有<strong>其他线程****试图占有对象</strong>someObject，<strong>就会等待</strong>，直到当前线程释放对someObject的占用。
someObject 又叫同步对象，所有的对象，都可以作为同步对象
为了达到同步的效果，必须使用同一个同步对象</p> <p><strong>释放同步对象</strong>的方式： synchronized 块自然结束，或者有异常抛出</p> <p><img src="/docs/assets/img/789.85451279.png" alt="synchronized 同步对象概念"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
  
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span>
   
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
     
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
     
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">Object</span> someObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; t1 线程已经运行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span> <span class="token string">&quot; 试图占有对象：someObject&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>someObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                          
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span> <span class="token string">&quot; 占有对象：someObject&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span> <span class="token string">&quot; 释放对象：someObject&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; t1 线程结束&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// TODO Auto-generated catch block</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot; t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; t2 线程已经运行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span> <span class="token string">&quot; 试图占有对象：someObject&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>someObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span> <span class="token string">&quot; 占有对象：someObject&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span> <span class="token string">&quot; 释放对象：someObject&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; t2 线程结束&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// TODO Auto-generated catch block</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot; t2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
       
<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用synchronized-解决同步问题"><a href="#使用synchronized-解决同步问题" class="header-anchor">#</a> 使用synchronized 解决同步问题</h3> <p>所有需要修改hp的地方，有要<strong>建立在占有someObject的基础上</strong>。
而对象 someObject在同一时间，只能被一个线程占有。 间接地，<strong>导致同一时间，hp只能被一个线程修改。</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
   
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span></span><span class="token class-name">GradientPaint</span><span class="token punctuation">;</span>
 
<span class="token keyword">import</span> <span class="token namespace">charactor<span class="token punctuation">.</span></span><span class="token class-name">Hero</span><span class="token punctuation">;</span>
   
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
   
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
        <span class="token keyword">final</span> <span class="token class-name">Object</span> someObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> gareen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;盖伦&quot;</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>
          
        <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>
  
        <span class="token class-name">Thread</span><span class="token punctuation">[</span><span class="token punctuation">]</span> addThreads <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span><span class="token punctuation">[</span><span class="token punctuation">]</span> reduceThreads <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
          
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                     
                    <span class="token comment">//任何线程要修改hp的值，必须先占用someObject</span>
                    <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>someObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        gareen<span class="token punctuation">.</span><span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                     
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// TODO Auto-generated catch block</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            addThreads<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
              
        <span class="token punctuation">}</span>
          
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token comment">//任何线程要修改hp的值，必须先占用someObject</span>
                    <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>someObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        gareen<span class="token punctuation">.</span><span class="token function">hurt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                     
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// TODO Auto-generated catch block</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            reduceThreads<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
          
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span> t <span class="token operator">:</span> addThreads<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// TODO Auto-generated catch block</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span> t <span class="token operator">:</span> reduceThreads<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// TODO Auto-generated catch block</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
          
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d个增加线程和%d个减少线程结束后%n盖伦的血量是 %.0f%n&quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span>n<span class="token punctuation">,</span>gareen<span class="token punctuation">.</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
          
    <span class="token punctuation">}</span>
       
<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用hero对象作为同步对象"><a href="#使用hero对象作为同步对象" class="header-anchor">#</a> 使用hero对象作为同步对象</h3> <p>既然任意对象都可以用来作为同步对象，而所有的线程访问的都是同一个hero对象，<strong>索性就使用gareen来作为同步对象</strong>
进一步的，对于Hero的hurt方法，加上：
synchronized (this) {
}
表示当前对象为同步对象，即也是gareen为同步对象</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
   
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span></span><span class="token class-name">GradientPaint</span><span class="token punctuation">;</span>
 
<span class="token keyword">import</span> <span class="token namespace">charactor<span class="token punctuation">.</span></span><span class="token class-name">Hero</span><span class="token punctuation">;</span>
   
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
   
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> gareen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;盖伦&quot;</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>
          
        <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>
  
        <span class="token class-name">Thread</span><span class="token punctuation">[</span><span class="token punctuation">]</span> addThreads <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span><span class="token punctuation">[</span><span class="token punctuation">]</span> reduceThreads <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
          
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                     
                    <span class="token comment">//使用gareen作为synchronized</span>
                    <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>gareen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        gareen<span class="token punctuation">.</span><span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                     
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// TODO Auto-generated catch block</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            addThreads<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
              
        <span class="token punctuation">}</span>
          
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token comment">//使用gareen作为synchronized</span>
                    <span class="token comment">//在方法hurt中有synchronized(this)</span>
                    gareen<span class="token punctuation">.</span><span class="token function">hurt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                     
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// TODO Auto-generated catch block</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            reduceThreads<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
          
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span> t <span class="token operator">:</span> addThreads<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// TODO Auto-generated catch block</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span> t <span class="token operator">:</span> reduceThreads<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// TODO Auto-generated catch block</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
          
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d个增加线程和%d个减少线程结束后%n盖伦的血量是 %.0f%n&quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span>n<span class="token punctuation">,</span>gareen<span class="token punctuation">.</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
          
    <span class="token punctuation">}</span>
       
<span class="token punctuation">}</span>
</code></pre></div><p><strong>测试类</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">charactor</span><span class="token punctuation">;</span>
  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Hero</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">float</span> hp<span class="token punctuation">;</span>
     
    <span class="token keyword">public</span> <span class="token keyword">int</span> damage<span class="token punctuation">;</span>
     
    <span class="token comment">//回血</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        hp<span class="token operator">=</span>hp<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
     
    <span class="token comment">//掉血</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hurt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//使用this作为同步对象</span>
        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            hp<span class="token operator">=</span>hp<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>   
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
     
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attackHero</span><span class="token punctuation">(</span><span class="token class-name">Hero</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        h<span class="token punctuation">.</span>hp<span class="token operator">-=</span>damage<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%s 正在攻击 %s, %s的血变成了 %.0f%n&quot;</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>h<span class="token punctuation">.</span>name<span class="token punctuation">,</span>h<span class="token punctuation">.</span>name<span class="token punctuation">,</span>h<span class="token punctuation">.</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>name <span class="token operator">+</span><span class="token string">&quot;死了！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token operator">&gt;=</span>hp<span class="token operator">?</span><span class="token boolean">true</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span>
</code></pre></div><h3 id="在方法前-加上修饰符synchronized"><a href="#在方法前-加上修饰符synchronized" class="header-anchor">#</a> 在方法前，加上修饰符synchronized</h3> <p>在recover前，直接加上synchronized ，其所对应的同步对象，就是this
和hurt方法达到的效果是一样
外部线程访问gareen的方法，就不需要额外使用synchronized 了</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">charactor</span><span class="token punctuation">;</span>
  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Hero</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">float</span> hp<span class="token punctuation">;</span>
     
    <span class="token keyword">public</span> <span class="token keyword">int</span> damage<span class="token punctuation">;</span>
     
    <span class="token comment">//回血</span>
    <span class="token comment">//直接在方法前加上修饰符synchronized</span>
    <span class="token comment">//其所对应的同步对象，就是this</span>
    <span class="token comment">//和hurt方法达到的效果一样</span>
    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        hp<span class="token operator">=</span>hp<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
     
    <span class="token comment">//掉血</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hurt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//使用this作为同步对象</span>
        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            hp<span class="token operator">=</span>hp<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>   
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
     
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attackHero</span><span class="token punctuation">(</span><span class="token class-name">Hero</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        h<span class="token punctuation">.</span>hp<span class="token operator">-=</span>damage<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%s 正在攻击 %s, %s的血变成了 %.0f%n&quot;</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>h<span class="token punctuation">.</span>name<span class="token punctuation">,</span>h<span class="token punctuation">.</span>name<span class="token punctuation">,</span>h<span class="token punctuation">.</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>name <span class="token operator">+</span><span class="token string">&quot;死了！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token operator">&gt;=</span>hp<span class="token operator">?</span><span class="token boolean">true</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span>
</code></pre></div><p><strong>测试</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
   
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span></span><span class="token class-name">GradientPaint</span><span class="token punctuation">;</span>
 
<span class="token keyword">import</span> <span class="token namespace">charactor<span class="token punctuation">.</span></span><span class="token class-name">Hero</span><span class="token punctuation">;</span>
   
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
   
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> gareen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;盖伦&quot;</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>
          
        <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>
  
        <span class="token class-name">Thread</span><span class="token punctuation">[</span><span class="token punctuation">]</span> addThreads <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span><span class="token punctuation">[</span><span class="token punctuation">]</span> reduceThreads <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
          
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                     
                    <span class="token comment">//recover自带synchronized</span>
                    gareen<span class="token punctuation">.</span><span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                     
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// TODO Auto-generated catch block</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            addThreads<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
              
        <span class="token punctuation">}</span>
          
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token comment">//hurt自带synchronized</span>
                    gareen<span class="token punctuation">.</span><span class="token function">hurt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                     
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// TODO Auto-generated catch block</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            reduceThreads<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
          
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span> t <span class="token operator">:</span> addThreads<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// TODO Auto-generated catch block</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span> t <span class="token operator">:</span> reduceThreads<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// TODO Auto-generated catch block</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
          
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d个增加线程和%d个减少线程结束后%n盖伦的血量是 %.0f%n&quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span>n<span class="token punctuation">,</span>gareen<span class="token punctuation">.</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
          
    <span class="token punctuation">}</span>
       
<span class="token punctuation">}</span>
</code></pre></div><h2 id="线程安全的类"><a href="#线程安全的类" class="header-anchor">#</a> 线程安全的类</h2> <p>如果一个类，其<strong>方法都是有synchronized修饰的</strong>，那么该类就叫做<strong>线程安全的类</strong></p> <p>同一时间，只有一个线程能够进入 <strong>这种类的一个实例</strong> 的去修改数据，进而保证了这个实例中的数据的安全(不会同时被多线程修改而变成脏数据)</p> <h3 id="hashmap和hashtable的区别"><a href="#hashmap和hashtable的区别" class="header-anchor">#</a> HashMap和Hashtable的区别</h3> <p>HashMap和Hashtable都实现了Map接口，都是键值对保存数据的方式
区别1：
HashMap可以存放 null
Hashtable不能存放null
区别2：
HashMap不是线程安全的类
Hashtable是线程安全的类</p> <p><img src="data:image/png;base64,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" alt="HashMap和Hashtable的区别"></p> <h3 id="stringbuffer和stringbuilder的区别"><a href="#stringbuffer和stringbuilder的区别" class="header-anchor">#</a> StringBuffer和StringBuilder的区别</h3> <p>StringBuffer 是线程安全的
StringBuilder 是非线程安全的</p> <p>所以当进行大量字符串拼接操作的时候，如果是单线程就用StringBuilder会更快些，如果是多线程，就需要用StringBuffer 保证数据的安全性</p> <p><strong>非线程安全的</strong>为什么会比<strong>线程安全的</strong> 快？ 因为不需要同步嘛，省略了些时间</p> <p><img src="/docs/assets/img/2596.66d9e808.png" alt="StringBuffer和StringBuilder的区别"></p> <h3 id="arraylist和vector的区别"><a href="#arraylist和vector的区别" class="header-anchor">#</a> ArrayList和Vector的区别</h3> <p>ArrayList类的声明：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
        <span class="token keyword">implements</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">RandomAccess</span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span>
</code></pre></div><p>Vector类的声明：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Vector</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>    <span class="token keyword">extends</span> <span class="token class-name">AbstractList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
    <span class="token keyword">implements</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">RandomAccess</span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span>
</code></pre></div><p>一模一样的~
他们的区别也在于，Vector是线程安全的类，而ArrayList是非线程安全的。</p> <h3 id="把非线程安全的集合转换为线程安全"><a href="#把非线程安全的集合转换为线程安全" class="header-anchor">#</a> 把非线程安全的集合转换为线程安全</h3> <p>ArrayList是非线程安全的，换句话说，多个线程可以同时进入一个ArrayList对象的add方法</p> <p>借助Collections.synchronizedList，可以把ArrayList转换为线程安全的List。</p> <p>与此类似的，还有HashSet,LinkedList,HashMap等等非线程安全的类，都通过工具类Collections转换为线程安全的</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
 
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list2 <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">synchronizedList</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
        
<span class="token punctuation">}</span>
</code></pre></div><h2 id="线程死锁"><a href="#线程死锁" class="header-anchor">#</a> 线程死锁</h2> <p>当业务比较复杂，多线程应用里有可能会发生<strong>死锁</strong></p> <h3 id="演示死锁"><a href="#演示死锁" class="header-anchor">#</a> 演示死锁</h3> <ol><li>线程1 首先占有对象1，接着试图占有对象2</li> <li>线程2 首先占有对象2，接着试图占有对象1</li> <li>线程1 等待线程2释放对象2</li> <li>与此同时，线程2等待线程1释放对象1
就会。。。一直等待下去，直到天荒地老，海枯石烂，山无棱 ，天地合。。。</li></ol> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAnQAAAF1CAIAAADuv+CgAAAdKElEQVR42u3d/48U933H8fw9kRId4MSJ08ZRXFlVZaWVVYVUEYoiVFVWldBGdZQ4amu1jdtU/NDkB1MnpSHQBOrGTl3cENwWlBZSC9c/ICH4AYICGDhzcNwXjtvv18/sHMPc7Le543Z3Zu/x1Bu0O7s3uzfvvddzP5+Znf3ACgAA2FQ+YBMAAECuAACQKwAA5AoAAMgVAAByBQCAXAEAALkCAECuAACQKwAAIFcAAMgVAAByBQCAXAEAALkCAECuAACQKwAAIFcAAMgVAAByBQAA5AoAALkCAECuAACAXAEAIFcAAMgVAAByBQAA5AoAALkCAECuwOQyNTWVZ+FUX/KvecN3y/MjG1gVgDHLtfqj3csvP60GVthQXlJl92u8JL08udzrzpsl1zw/1esNQR7lYzIQyKUI5FxyjZ7lG3+tBlbYUP7yJ0O3veSaEVhOufZaQ6+hcB9T9hd8H63y7sQgkEsRyLnl+q/fVAOLXEtq0/5TvmnhDRzL9lnno4xu8zg4p5L5dRLkKm8LH8j55fqXamCFDTXTxt//hE0UZ4aejz4tnF+H+UeufZ4YuU6cXOVt3kAuvFx/8hdqYJFrGQes/adhu9orz8h14EPnkXrnNHX+463yv3tA+eQqb3MHcuHl+vqfq4FFrqUep/bajdpLcl2HmzmHpDl1mOfp5REws06aXOVt7kAuvFxf+1M1sMh1UuXaa1o1z+G+j3Lg8cCnlzm0yph1q8hV3uYO5OLL9RtqYJHrBMh1ZdCxvn10lfODsyvrOeIp/0P09yuzTpZc5W3eQC68XH/8dTWwyLWMcu10Z/9Z1kcZufZZuLEDmjo/FJRfySixXOVt7kAuvFz/5WtqYJFrSUeuvfae9hllbnifax65rndqt8+ncrs+MX0vvVzlbe5ALrpcK69+VQ0scp3IGeP8qtvwyDWn8/K8CdC4rSBXYZs/kAsv13/+k2FXeKA+VzM3xbdmnucInmT/IlcAo5CrNM4dyMWX61eGXe1+ZK+mF6ba1uVHMj8+liJXACORqzTOG8iFl+uRPxpqRc3osSRzU/pqr8u9lgy7yBXAKORaqjR+aOJxBHLh5Xr4y0OtaLt3XFgzyZBvSXqFmSUjKHIFMAq5lieNe10eWSAXXq4/+tLwak1LUld73Tn/aof6tDuLXAGMQq7lSeP0fUacySWR6w//cNgVbfe1V9e0ee3Czjuk79Z1hSMocgUwCrmWLY3Hksklkes/PTfUijb6gwsPe9PtbvHy9K1d79ln+fCKXAGMQq5lS+MxBnLx5foHw6u1LXy4sOuF9H0yd8i5fHhFrgBGIldpnDeQCy/XQ78/4oqa8eD/PkvWvBS6rWGURa4ARiHXUqXx6KM4HciFl+vB3SOo1a6krmYuZC73WtJ/+fCKXAGMQq7lSePR53AmkAsv1x98cXj18M3O2oWZ/9PLO++ZZ53DLnIFMAq5lieNsyPakQdy8eX6haFWe6M/vNz/anp5R+e+MMYiVwAjkas0zhvIhZfrgV1qYJErgFHIVd7mDuTCy/X7n1cDi1wBjEKu8jZ3IBderv/4e2pgkSuAUchV3uYO5MLLdf/n1MAiVwCjkKu8zR3IhZfrP3xWDSxyBTAKucrb3IFcdLkuf+931eAiV3SjVVlsXj8bKlzovAqsV67CNn8gF1+uz6rBRa5bR5AL07UTe6tvPN+cuRSuhuXRn8nLT4cLXa7OXAr3fHjnzNWOn62++lxya3igxsWTTAyBvLFALrxcv/s7anCRa9kNujT7UJ+zV4PhKgd2dhVkcF793NEhOS88RLLmcDm2eHjEcLVx+XR4mUVXl2YT5ceXsYXkKmxzB3Lx5foZNbjItWwqrZ85WD+1r3HlnVhjlf3PRvps23SlUY0uNKqFe96pJ9acPh+/A4jVG36F8BsFARfxaWMz5Spv8wZy4eX6yjNqcJFr4ad262/vDzaK9BNfDXJ998jEjPyCdMNvVHvzhViujYsn6z//Tvhf6ydNrsI2dyAXXq5//1tqcJFr8YhtGpSzevXMwa2z/7I1e7V+7mjw6+qI98o7BrUTIldhmzuQCy/Xfb+pBhe5FsGm7x4JQ7f6qX2rV8++7migVblePFl9bU94q7Gq3vZMMkopV2GbO5ALLdfK9347PppRDajvfoZcxzA+ax9bFJy6atNzR43P8lA79mLlwM7w5sOmKBcCeV2BXGi5JswUiWSYWED8/Q9dqEuz8VFI8Uxv7cTeeDcq1vu+pDV7tT2qrYaxfnwgNEqBNC54GpMruZZy4jcMuWpvvWRTbJpl24d6VQ7t8h6FXKUxuWrnFhqnhuFp5fDu1WEWhkzjwvHomOoLx20KcpXGo5BroQjt9Ac2+ZOW8akSZq+atBy1Xy+fjuYG7LqGNCZXTFC0V6uvPlc5sNMsZRGIPsv09n7ngYI0JleUkjA2Tc54YJxaqCmE+ql9jiuGNCZXlI/4gJr6uaM2RcHfANWOvWjnN6QxuaLAQ6LKYmTT9o4953koB41qdLT2oV12x0IakysKOgaq7H82GgY5VVAJFbvaxOnzNgakMbmiAKPV9te6rV6m1ZIrtnJ4d/T9d2aJyRXkijFSP/t6GK0mp9HHJPT03SOOPiNXG4FcMU6ic+gbrU6qZc8dNYQlV5ArRkTjyjuVw7uTUwFjguUafTRZo8kV5Iph06osVl/b4/u6twjN6fNmJsgV5IrhDlhthK3bfafWIldy1U5s+mi1dmJvdJ59H13domqt1t58IZTPwpIruWonNk+uS7P1U/sE6xYnvAYc30Su5Kqd2IwRi8lAgFxBrti00Wr7wKXqG88bsCLzfiuaxgC5kqt2YiNyXZqtv3vEdkDnu674+xgaF0/WzxwMb7+ij+v4GnZyJVftxECt2gjoPXStBpuGv9Z0kSu5kqt2oh/RyfcP7HTcCvoQBqwZuSYnlwa5kqt2ogvVV59zEBP601qaXX7lmTVy9V065Equ2rkBpqamNvFuhcbhS8gzeD21Ly1XZ3EiV3LVztHJtUyubVTtNsM6Bq+zV9fI1X56ciVX7Xx0uSZXp3JQio1fO7G39tZL/n6wjtfMsRcTudoa5Equ2rlBuQ60ZnnnhMOwIwSlCWGsi+bMpVW5vvKMrbGxNChsaJAruRblT6W8Y1Zgw1RffS782VYO7bIpNkWuxQkNciXXQvyplHog60MU2DCNy6cjuR7ebVPktGZZdiSRK7kO/S9k4Ks/vlrSkWv0tedh2GFCGBslmDU6RyZyREeJ3n+TK7mOYcCaXph+Q1rGkWvtzRfqZ1/3Z4MNE14/0VfRYZ1//gV/O06u5DpmuZblT6X30LVq2IpHfAnV395vM6xLrsUfyJIruRZIruUauZ761ud++qVtKk+FbaVrfeo//3iHrvV5k13GHUnkSq7j/1MpqVxD+tT+/c9WlhdXalXVv8K2Kk7XtKPIXZuYHUnkSq4FHbkWf1r4F197vPrjL4vgnDE9Nzd37949ctW1TUwMI1dy1c4J5P++8bH62Z+s1CpqYIWYnpmZCUldDLnqSHG7NjE7kqQxuUJMk6sqkFwnY0eSNCZXiGlyVaUfuZoWJlftnBCu/M2TrbmbK9VlNbCKJVcdKVvXpDG5aucW4u63n2rduSKCyVXXII3JFZvGtW892bp7Y6VyXw2sYslVR8rWNWlMrtq5hRDT5KprkMbkivWQ44yGIXpay0sqTxVKrtqxuV1rVRYFhjQmVwymOX2+cmBndDr+voodb0xPTU2tazm56tqmd61x4Xjl0C5fXCGNyRW5/TpzqXbsxf6Kbcf0vXFVO467LMwwxmeYroLJVdcetWuxVqtvPO/LjKUxuWKTFTuCmO6TuZ0RnF7SP6BHH99bSq7D6NpYvNu1a7QqjckVw1XsiMdAcbB2HeVM9aVrTJNribqW/23TULtGq9KYXDEKxUYxfX9x2BWF6doLXa/2umfn3XotHGoVS65l69rAhg67a7QqjclVO0en2J/t2TaajIvzNP1/r5juPgYi15HLdRhdG4tc59557f4PPk+r0phcn1Yjq/nv/Ebj8v+2lhZGUFGkrr2cXtLrpq736bN8eFUsuY7qt97cro24cc33f3n320/5M3+UYlMjV6yDZIrsF197vLU0P5pqp+qay+kl8dX08uTqwLWNpgomV13LVSe+8tjCT/9q+fufHfixNEhjcsUmaDWeIoti+t78CCpK1Qf/Zxb2uedqUvde4SirWHItYddG37Kka/PXL9ZO7M3zyW9IY3LFI2k1FdNzw652qq650OtqvCRz/8zduv7sCKpgci1Z10bfr86utRamKVYakyuGq9VUTN8darVTdR03pRcmlx8k+N301T5rHkYVTK4l61r2WKfxdY1ipTG5YohaHVlM98noTMh2ZvG4nhu5TnzXKFYakys2QnRu4Ryf6otienFW5aliyVVHNqNriWIbl08LDWlMrhhMa2k2z6f6xDS56lpQbGv2qtCQxuQKMU2uOlKyrkljctXOLSbXhTsqTxVLrjqSr37xtcfJVRqTq3aKaXLVtc2skCfkKo3JVTvHENPN+dsqTxVKrtqRs8hVGpOrdoppctW1TS7TwtKYXLVzXDE9o/JUweSqIyXrmjQmV+0kV0Wuk1CNGxeMXKUxuWrnmGJ67pbKU8WSq47kqNo7h3/5zU+SqzQmV+0U0+Sqa5tW1X/7+pkXPkau0phctXMcMX33fZWniiVXHclTd9772R77XKUxuWrnyPmPr34yJHXR6q0924v4rJ7/9YLEdDG7VswqTtekMblq55ajVqvNFIm5/95/+9qlmUJSnJguWteKxuLxv01eReQqjclVO8dAvV6fKxL3/ud79/7r7+YKyb1793St+MxfOnP/h18sYNekMblqJ8anjTMHl195prU0a1NgYzQuHK+fO2o7SGNy1U6slevLT9dP7bMpAGlMrtqJzZSrwSs2QPRNxtPnbQdpTK7aiSy1E3sjuRq8YgMvnmMvetlIY3LVTvSTq8Er1kVz5lL1tT0rjapNIY3JVTvRW64Gr4A0JlftxKbL1eAVOcesoWwHaUyu2ol8cjV4xSBaC9OVQ7saF47bFNKYXLUTveV67MW0XA1e0Z/GxZP1d4/YDtKYXLUT/ai+8fwauRq8AtKYXLUTmyLXyqFdtbdeqp99vXJ4txk/dNKcuRReG44Nlsbkqp3IG5rpeeAoQ/c/a2YYaVqzVysHdjauvGNTSGNy1U5sPEltBGRfFZVFG0Eak6t24pHDdGE6lO2wlWleP1t99TlTwdKYXLUTm0bj4snKgZ0hXm2KLWrWmUteANKYXLUTQ4jX6fM+dLGVMRUsjclVOzHMkF2aNTe4RWxaP3MwOioY0phctRPDpn5qX/W1PQ4hnngal0/XTuzVaGlMrtqJUfn13SOmiCfWqVfe8TEbaUyu2olx0pq96ijiSaL21kvRuYLJVRqTq3ZinKOcC8cr+5+tnzloU5T9TVLmAqQxuWonxprLS7ONiydth7K2b2G69uYLlQM7zUBIY3LVThSR5syl6mt7mtPnbYoS0KjGRyp5bySNyVU7UXTq545WDu0ytVj0Nr17JAxVTeZLY3LVTpQywUM580BxSN70hKGqN0DSmFy1E6WkOXOpdmJv7diLNsXYaVw+HYaqviROGpOrdmLC0r1ae+ulxoXjBrKjfHNTP7UvPkwp+t4FQ1VpTK7aicmTazBr8Ovqmd8bVZYdKtFXrh7eXT9z0PmVpDG5aie2zKDq+tnlV56pvfmC6N9E6j//TiRUZ84iV3LVTmzp0ezl06sXLhyvnzvanLlkm6zvPcr0+frb+5ODfm1DciVX7QRSkpi5FEZdyaFPQbq+N7TPtkrelERmfXu/DxaTK7lqJ5BjRHvhePWN52tvvpDoZCvPHoffPdFn7cTeeE+qFwm5kqt2Ao9EtCvxwM4wRFt17fT5yT5RX2v2anLKpOjrVA/sDG81vAzIFeQKDJFgmsi1p/atDnMvniz1jsZoYHr9bOPy6fjw6frZ18NvFx3q5WhqcgW5AuOhUa0dezGaKT13NBJVZTEM9aLTDxVvGjk8t9iXYdgdxuLhLUI8/g5mjebAfSc5pDG5AgUdBbblGtQVfx1psNfyK88Eda1+O2mjGkwWahiDwngA+lCf4WmcObiqz5lL4WmEikfY0a1nXx/S0wC5kqt2AqPQbaSx9qAw+tKeN54PFUsu+qzty0+Hio9Mzt6a42rl0K7Vn71+Nt4z+lCfKbkmY1ZAGpMrsBU1/HD0meOqEwpCGpOrdgKANCZX7QQAcgW5AgCkMblqJ4ZLvV6fn59fWFhYXFxstVrpm6rV6kKbpaWlzE2BRqMRls/Nzc20CRfu378f1pa+T7PZvHfvXrySsLb0TWGF8U2dK69UKvGPhDvEN4V/9WarUm8u15rhQv/fKDyN5GkP/PWbrWi1i5XG/HJ9qdqohrU/WH2t0QoPFypc6PqD4aZKqHrTq4hcQa7AGoLAftXm6tWrwYXpm4Iv45tu3ryZ8V/w1vXr13/VwY0bN8IK0wYNPxvfdOfOnYyb4+VXrlzJPO6tW7fim95///1V3dab7y9Up+ejChdml2rVRk+lBdMnT3vAX1Otefte7eZ89UFVbs5VwsLVX/9+/Wb7EWcWw6O1On823DncGtbgVUSuIFegu1yvXbuWkVwY0cY3TU9Pp+W6vLz8q76EH0zuHEaQXdefPG4grDAt3aD5eHky9AxjythkiQjD5WqPIePt27fzyDWsc/rBqqJ1zlViud6vNTJyDf8Hnbd6yPUOuZIryBXYgFzDCDKRa61WS3s0/NTtNu+99156eTIJHC4kC9OTxsnwNDA7+/DMR5VKpfP+YeS6sFxfrDRC3VpY9Wu40NqoXIMab7TVGNfdpXpYf/g/XL5fzcq17ddKeGhyhTQmV2Ddcs3M/XaVa0aKwbXx8iDCcDW5KQx24+VB2Il3wyg2GZ6Gh0vunJ52TlaSftA0jWbr9mJtuj3W7Lo3dKBcm63WrQeTzLfv1dIrCZeTq2m5xpW+J7lCGpMrMFiuQYGZmzrlGgyazNkGh2XkF67euXOnc/Ca2C7Z7Xr//v3MTHI8SE3vo03PLWefc6UR7yLtejDRQLlGXpyvxLtvq42eh0elp4Uf7HytJTtfyRXSmFyBwXIN1pybm5tPkXgukWt6b2syZk0TFib2DWvLqDQZHCf+S+68uLi4snbOuev6V59ztRHvJW00NzJyXYzcXAlrCPrss2Viud5sj25nFlcVO//gR8gV0phcgcFy7UMi16DARIpd52zDwhs3bmTkmh7vhsvJRPH169eTFc7MzKy0D0KOr4abMjuAO7RXCVbbwD7X8COzS6tHCGd2o3aXa/v44WDxeCa5fcRT9MQq5Equ0phcgTxyvbqWTrkmh/6uS67pyd7wcMkhTnfu3AkGjT/SE38gJ5lVvnv3bq8nXGu04j2glQ0dLbxuuc5X4kOc2pPJqztf682WkSukMbkCg+UaRpONRqOZovPYomRaOLgw/7RwIMgyGaEm8os/aZN8LHV+fj757GzmjBMJzdbKnfYnU/vM6G72tHBl6cHxwwvLqxPFM4vV+AOy5EquIFegn1yvXbuWuanzgKbgvKDVeOGtW7f6H9BUqVTS0s1MNQcHB5evdDu4qfN0Fg+fUqS3SnBbs9XasFzXdUBTWq5B7cGp6UOcyJVcQa7AALnm+Zxr5qM4yUdROz+Kk1Zv+gM5yRA2vkNQbCLs5DjkPlIMlZxEKU1YT7zC5MRSyceBOoa/6/goTlquK6lJ6WlyJVdpTK7AZsk1MwYNyoxPIpE5G2LnvG4y/Zs+PDgmrD99U9dzAjearfgMiNs/8VT7nA/R2YAXllfPNDw1NRVUGn/uNt6/+8EPfnAqxbY2ydWuJ5F47IlPdZ5EIiPXwI7Hn7iZ+tk8cg2PuK7lkMbkqp2YfLk+yukPE5IjgTvP1pQcJ9V5U0zrwa7W2GfbPvFU0FuwY5BiPCz+0Ic+FAs1WUm4HM9LB4GFpz5/PzrBUyultM7TH277xKc7T3/YKddt27eHx40nlqMn87FPbkyuUx14NUpjctVOTJpch3Hi/jTp/bUZW6dHw50nZmo9OAQpMx8blsRTuOFpBzNl5Lp9+/bEYdt37Nj2xKe3P/Gpbe2FicYyJ+6P5ZrMOT/2xJOxXD/y8V/LWHDHY4+FtYUxdKhtH38yXmEfU3aKM72kv1ZJVxqTq3aifAz1K+fWjj5bydfPpY916n9TPGxNvtwtqakdHw0VZJmZ+P3whz8cnkmwdVp4K+1vrNu+4yOdukp/5VyQ6PbHPrpt2+o6t+34SHiI+EOunaqrN/p95VxX3fZa2GfwakQrjclVO4Gx0V9LGUVteA/oQB2mHzHnyHXgEyNXaUyu2gkMXaK9hoAD7dXLfDk11v9ROses/R8x58iVXKUxuWonMIZxakZjAyXXdbiZc0i6AR32enp5BEyu0phctRMonFx7zbgOnLPtdf88I9c8Ty89+F4ZtGOVXKUxuWonMB659lHmwGN380/G5jwEaV0PMdCv5CqNyVU7gRHJtdOd/WdZH2Xk2mfhxg5oyjznlRyzx5DG5KqdwChGrr32nvYZZW54n2seua53arfX+Duz3KdxpDG5aidQCO+uS3UbHrnm1F6eNwEaJ43JVTsBANKYXAEA0phctRMApDG5aicAkCu5aicAQBqTq3YCgDQmV+0EAHIlV+0EAEhjcgUASGNy1U4AIFdy1U4AgDQmVwCANCZX7QQAaUyu2gkA5ApyBQBIY3LVTgCQxuSqnQBAruSqnQAAaUyu2gkA0phctRMAyJVctRMAII3JFQAgjclVOwGAXMlVOwEA0phcAQDSmFy1EwCkMblqJwCQK8gVACCNyVU7AUAak6t2AgC5kqt2AgCkMbkCAKQxuWonAJAruWonAEAakysAQBqTq3YCgDQmV+0EAEhjcgUASGNy1U4AkMbkqp0AQK4gVwCANCZX7QQAaUyu2gkA5Equ2gkAkMbkCgCQxuSqnQBAruSqnQAAaUyuAABpTK7aCQDSmFy1EwAgjckVACCNyVU7AUAak6t2AgC5kqt2AgCkMblqJwBIY3LVTgAgV3LVTgCANCZXAIA0JlftBAByJVftBABIY3IFAEhjctVOAJDG5KqdAECuNgK5AgCkMblqJwBIY3LVTgAgV3LVTgCANCZX7QQAaUyu2gkA5Equ2gkAkMbkCgCQxuSqnQBAruSqnQAAaUyuAABpTK7aCQDSmFy1EwDIFeQKAJDG5KqdACCNyVU7AYBcyVU7AQDSmFz1DwCkMblqJwCQK7lqJwBAGpMrAEAak6t2AgC5kqt2AgCkMbkCAKQxuWonAEhjctVOACBXkCsAQBqTq3YCgDQmV+0EAHIlV+0EAEhjcgUASGNy1U4AIFdy1U4AgDQmVwCANCZX7QQAaUyu2gkAkMbkCgCQxuSqnQAgjclVOwGAXEGuAABpTK7aCQDSmFy1EwDIlVy1EwAgjckVACCNyVU7AYBcyVU7AQDSmFwBANKYXLUTAKQxuWonAJCrNCZXAIA0JlftBABpTK7aCQDkSq7aCQCQxuSqnQAgjclVOwGAXMlVOwEA0phcAQDSmFy1EwDIlVy1EwAgjckVACCNyVU7AUAak6t2AgC5glwBANKYXLUTAKQxuWonAJAruWonAEAak6t2AoA0JlftBAByJVftBABIY3IFAEhjctVOACBXctVOAIA0JlcAgDQmV+0EAGlMrtoJAOQKcgUASGNy1U4AkMbkqp0AQK7kqp0AAGlMrgAAaUyu2gkA5Equ2gkAkMbkCgCQxuSqnQAgjclVOwEA0phcAQDSmFy1EwCkMblqJwCQK8gVACCNyVU7AUAak6t2AgC5kqt2AgByUzm0y0YgVwAAyJVcAQDkSq4AAHItJWb5AQDkCgAAuQIAAHIFAIBcAQAgVwAAQK4AAJArAADkCgAAyBUAAHIFAIBcAQAgVwAA8Oj8P4SkoeqMUjkeAAAAAElFTkSuQmCC" alt="演示死锁"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
   
<span class="token keyword">import</span> <span class="token namespace">charactor<span class="token punctuation">.</span></span><span class="token class-name">Hero</span><span class="token punctuation">;</span>
    
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
      
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> ahri <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ahri<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;九尾妖狐&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> annie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        annie<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;安妮&quot;</span><span class="token punctuation">;</span>
         
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//占有九尾妖狐</span>
                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>ahri<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;t1 已占有九尾妖狐&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token comment">//停顿1000毫秒，另一个线程有足够的时间占有安妮</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// TODO Auto-generated catch block</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                     
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;t1 试图占有安妮&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;t1 等待中 。。。。&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>annie<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;do something&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>  
                 
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//占有安妮</span>
                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>annie<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;t2 已占有安妮&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                         
                        <span class="token comment">//停顿1000毫秒，另一个线程有足够的时间占有暂用九尾妖狐</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// TODO Auto-generated catch block</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;t2 试图占有九尾妖狐&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;t2 等待中 。。。。&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>ahri<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;do something&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>  
                 
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
        
<span class="token punctuation">}</span>
</code></pre></div><h2 id="线程之间的交互"><a href="#线程之间的交互" class="header-anchor">#</a> 线程之间的交互</h2> <h3 id="使用wait和notify进行线程交互"><a href="#使用wait和notify进行线程交互" class="header-anchor">#</a> 使用wait和notify进行线程交互</h3> <p>在Hero类中：hurt()减血方法：当hp=1的时候，执行this.wait().
this.wait()<strong>表示 让占有this的线程等待，并临时释放占有</strong>
进入hurt方法的线程必然是减血线程，this.wait()会让减血线程临时释放对this的占有。 <strong>这样加血线程，就有机会进入recover()加血方法了</strong>。</p> <p>recover() 加血方法：增加了血量，执行this.notify();
this.notify() 表示通知那些<strong>等待在this的线程</strong>，可以苏醒过来了。 等待在this的线程，恰恰就是减血线程。 一旦recover()结束， 加血线程释放了this，减血线程，就可以重新占有this，并执行后面的减血工作。</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcEAAAGaCAIAAAD4kG+LAAAlvUlEQVR42u2d328bS1uA+ZPSf6KfEAVEEYpApEIUIYoQFUIVokIiCJqrXp2LU/p9GEIDaSk0ULVSlFw0OlIjRa16YalqLlJFX9Iv5/g0pzltcpKsves173rszWZ/zM6s10nsfR7NyXHW67Vjzzx935nxzK91AACgKL/GWwAAgEMBAHAoAAAOBQDAoQAAgEMBAHAoAAAOBQDAoQAAgEMBAMp3aHP++vHXlykmRd4r6tDYQ4ugRdg5NHgjns5QTIq8Vyhm7KFF0CLsHfp//0QxKTi0Kg6lttMi7Bz6v/9IMSk4tCoOpbbTIiwd+g8Uk4JDK+NQartpi9jd3cWhl5sLf08xKTi0Kg6lthu3CBzarTFP/o5iUipYYyrqUGo7LcLOof9zm2JScGhVHEptp0XYOfS//5ZiUnBoVRxKbadF2Dn08d9QTAoOrYpDqe20CCuHOv91i2JScGhFHEpVp0XYOvSvh1Tk+uHPrHv1jzU5Wf0h4Y2Q0v8cHFoZh5ZZ/8s6nxZxgR366K8GLMHHk31cf6/hNZOXOqkZaQ/RX7xYwaFVcWhJFca2EtIiRtehNwcv3U/opua5U8/XXy31SOyu6K9Zt8sqOLQyDr1ZYqOI/kqLGFOHPvzLskrwOWX/qo5kSjbtgdEbsZNNjpRbcGhVHFpGQ0itn6k1nBYx+g6d/4uySvA5dX+efGxpJ0TPjB1PPjzrUskHDrvg0Ko4tNTmkKztqTWfFjHKDv3PPy+l9D7X00fCn9EjybtiD0weif+Levpg8oTkixm84NCqOLS8FmHYEGgRI+7Q//izwUvw8UR+nnxm/YPR02Lnx86JHY9eKvmkmqcoveDQqji0pAqTVdtTaz4tYpQdOvenA5beJ9e9Ef0Z/TU8M3oj9mv0auHDUx+YvELyzNILDq2KQ0uqMJq6mlufaREj5dAHfzJ4CT6n7J+x05L3xk7TX19z5FRtK+PvihYcWhWHllRhsmp7as2nRYy0Q/948NL9hE5+9j+zU8eTN5LHY9eMHk89OfnA1EuVUnBoZRxaWotIre20iLFz6L//USkl+KjSjvQ++P4NPdHTUi8Ve6KsJx1GwaFVcWh5zSH2M6uq0yJG3aHXBi/dz+nUr9EjsXutrpa8VOqVM+rftRILDq2MQ8tsDtEqSosYU4fO/iHFpODQqjiU2k6LsHPov/0BxaTg0Ko4lNpOi7Bz6L/+PsWk4NCqOJTaTouwc2htkmJScGhVHEptp0XYOfRffo9iUnBoVRxKbadFWDn0+Be/SzEqOLQaDqWq0yJsHfo7FKOCQ6viUGo7LcLKoT//bYpRwaEVcShVnRZh59D7v0kxKji0Ig6lqtMi7Bz6z79BMSo4tCIOparTIiwd+usUo4JDq+JQajstwsqh935GMSo4tCIOparTIswd6vwi6BimGJWf/xYOHXtoEbQIO4eG7F4k1L9vFxMsUxFoEbQIHEqNARxKi8Ch1BjAobQIHEqNARhkpIs34aI7lBoDQIsAHAqAQwGHUmMAaBE4lBoDQIvAodQYAFoE4FAAHAo4FACHAg6lxgDQInAoNQaAFoFDqTEAtAjAocWZmJgo5bTYCVnnR48bPjXgUN4EHDpuDk19VHhQc00cCjgUh46zQ6MezMXkTL1A0SjgUBw68g7Vi8/WdJosPjVQRaOAQ3HoOOfyhpLVnxaNOrMeTh0FHIpDx82hBcJSk85QjAk4FIeOdo0x7740Oc22PzTWl0rtBByKQ0fPofqDmpixsPWSw1DUS8ChOHQ8HaoPMwtEteTygENxaEUdangkpkhzh6JUwKE4dPQcahI54lDAoYBDy4xDk5OWDKfidxL9rXp3A+BQHEqNAaBF4FBqDAAtAodSYwBwKOBQABwKOJQaA0CLwKHUGABaBA6lxgDQIgCHAuBQwKHUGABaBA6lxgDQInAoNQaAFgGj4lBv63Xz6a3jez+Tn1Jai9Puqwcn5c2j9k5dir/f4OMEHAo4NI7IURQpNUa50ttcPeXQtZpyqzM7Kec0H9+Q28Hx+gJiBRwKONSuxrR334s6Q7c6D68rsbaWZwKrNt7xkQMOBRxqHcl6GyvKqoFSn9wMegB23/PxAw4FHGqNRKPiUwlRJf1vvbjrba5SDwCHAg4tEp+6b5+pvlT3m6/I9GFsHGq4J0LWWuC2mC9ebvt0w1uJvKwrM7epL9P6gjM3JcGpt77U8Zo0URj1FmGy12GuQw339+7Y73RbzKEFxGe+SzkOLQHJ63thaX2BVgqj2CLMlZEUqLlTsjaw6ZhteauRo9U+OucVe+LQHNq774P5Uo9vkN3DqLcITRafGqgOkmKnbsLYGWx38YuZv+NQ05jUqV0lIIWRaxGG2yBqNpo1yfFzuw4GzOWHkXrj0LPG329INOq+vEeLhTGLQ61kZ9ItYJXIGz7p4AYcas8ADjUMR5vBQNPGCo0WRqJFFOgPjfVFFggYYxrVCNr8hQ0pDi09FMWh+bQb7yQapdHCmLWI5DDOIPlvqkk7ZgPrqV0HuTa3FaLtuBkOLfXZ719hwhOMSouwnY1UuONS4z5NZ6vhU5h3IODQi+5Qf7/hzE3RaGGEHJolNROHmk/J1MePVro0OThID6lVXIxDSyZYbW+tRqMFHJrrUJMnLTaBdBD9aaYZ4NCh476813xyk0QeRqJFWA1DZ82TNxdf8gqdtKlRBWZKdQbu/dQ8inH5s0rhnQO1MqncoMUCLQJwqE34WV8IJtiTwgMtAnCoBV7TffvMmZtqPb/t721TPwCHAg41y9z3G8GiorWrrcXp9k6dmgE4FHComTrrC83HN4K1ml7eY/8lwKFQPYd6TW/rtdXiIMH5L+/11PnNVwSegEPNMZ+naTvqPbwVl3FovMb4zkGwwedarfnkptwlRT8N3t/bPtlS6f6VYO9PtlQCHFqSRnHoaNQY/3Av8GA3flTejBblUHFlsH+ynBbZNrm3teeLu2rDZJof4NASZWq4zHPHYBYqufxQCLos3zw6vnc56c1kUdIUe4pDxaTBFvMMrwMOHWYi3zH7PlIn+7uhw9uoA4eeqjHe+pLEks7sZKo9+Uo74NDz0mhuLq93aOo5OHSINUZCS/fts9byTNSnOBRw6HmZFIeOcI1p77536wutxWmW+AQcesYCNf9KPg7lX10AWgS5PA4FwKEDCzR3TxEcSo0BoEUYxaG5e9bjUGoMAC0iM7rU9IcmNwVJne007H03cSgOBRiZONQw5OyM7Ix6HAqAQwGHAuBQWgQOpcYAFOao/81m/3CvoyZKv3ogRW1dIwfbO3VW1cGhOBQgs0UEltypqw0T2413UYd6W6+ju4EFi5x985Xcy/uGQwHAukX4+w1vfSl0qNxwalfFsLyNOBQAhxZEQld1Qy3lI4Eq7yoOBcChRVD9p70oda3mvn2mulkBhwLgUDu8rdfBguVsDI5DAXDooPHp3rYzNyVhqRq5AhwKgEPtkBy/+fQW06RwKAAOHZRgR7L+SBTgUAAcaoe3uerUrnobK7z/OBQAhxbB329I4f3HoQA4dFCZ8ingUAAcWkige9vsYIZDAXDoAC/g/hX1ZXwcSo0BwKHWMLKEQwFwKOBQABx6trhrNW/rNR8BDgXAoda0FqfDZUkBhwLgUDv40icOBcChdnjrS87cFBNCcSgADrXGP9xrLc+Eq4sCDgXAoXmB5+aqeJOV7XEoQIUd6jW9rddufcE03txviDrVbffNI8nfGTjCoQDVcqhYL9jCc63WfHJTTpDizE1pJHuy/8erB2yphEMBquhQ/3DP21hxX95rPr6hvBktoUPlNLV5ck+a9YXj+1eYpYRDAarrUMm4nYfXk96MFTWe3t59H92AHnAoAHFob+P41vKMZOKpAtXl8oBDz56JiQmT48nTDB+YdWbu9fUv2Px8GN0W4e9tu2+ftRanndpVHIpDbRz6Yf7apTurZ67RiQQFrBe9msZ6uU+qvz4OrYJDowSZe32h9fy2JPu8Vzj0jBxqK5ro+ZrHalQbux31nf7imlh1Ihuqe3UcCjj0rB1qYhlNaJnrU731kgY0DEILx7+AQwGHnnbo6h0llL5N5ei1+fneQRPHmuhGkzvrM+us82PhZ6oEU0/TS5PwE4cCDrVy6KWeJVfv9G/Fj16b/2AVwRmGrhpVmST7+hhTc6msbtMspVLXcSjgUI1DxZCxvP5Uhm+S7huKJjVgzAoP9dl36hX0kWbuaalxKA7FoYBDzfpDMxwaRKJ9zZaSy+uNVjiXT41AU82bFYEmr4ZDcSjg0EEdqn4ZMJc3zJT1g0K5F9dYzySqzfoJOBRwqLVD+7HnSS+pVYxpGE7qL5U7bq4fU0p9MZo5pMl4FpPiUMChRePQO71x+bw8PjOJNsnlNadpIsesUSPzqNa8D4EBehwKONS2xpQwazRXjlkKLjZDPndWvF7revniUBwKOPTsHErgBjgUcOgZfoseAIfiUGoMAC0CcCgADgUcSo0BoEXg0HOvMWUNDZnMkzd/AYN8J2qQMwGHAg4dYYcmp0DlTmYy/EMKvzzAoYBDhyjQ1HXms5ZWyv0KqeaLmFmXis3Jz7Uwq97hUMChg9aYErWi+TZ67pl668VebW4AWyCpBxwKOLSgQ5PiK6YYzReTDLPpAdeyy3UoQSgOBRw6Gg41D35tk/QsTad+f5Q4FHAoDh1Vh5osNa9f6LNjueWnybKhhKI4FHDoOTjUah+6XKMZ5vK5w0RWDgUcCji0Qg7V7x2vd2in0MLMgEMBhw4xly/XobZzm0y2WjLsGSBcxaGAQ8upMRMGGAo0VVUmW2/qNW0Sh5oEvDgUhwIOHZkaY5WG67sLzCc/5caehv9aAA4FHEqNAaBF4FBqDAAtAodSYwBoEYBDAXAo4FAAHAo49LxqTLkbCFvNW8p9UjY3BhyKQ6vl0I7lN4s62gVJDVULOBRw6PnUmNwvYpYYk6Y+i8m6JMz6BByKQy9ijcn6zlIxSdl+M0q/RB65POBQHHqha4x+XfpBwr3Cq4RkfYmTLyABDsWhFz2XH1IKb76miaHEsSfgUBx6oR06eJRXYN+O1JXtiUMBh+LQUXKoJvSz2gikgPVMlm4iDgUcikNHMpe3jftyt66z6g8dXp8D4FDAocNy6CBzMwvsY2y+NzIOBRyKQ0fMoYUFmvtYvRkZUwIcikNHxqGdvB3iTC5VYK+Rjs0QPKNJgENxKDUGgBaBQ6kxALQIGCGHHn19ufn0lhT/cE9+be++d189kOI7B/KrHGzv1OUgnyjgUMCh6TUmsOROveM1A4c23kUd6m297hlW/bq56n7zldzLBww4FHCodY3x9xve+lLoULnh1K6KYfm8Y7iu++XLl/39/YODA9/3o3c1m839LoeHh7G7gn+lPE+Of/78ebeL3Dg6OpKrRc9pt9s//fSTuohc7dQH5PvqruTFHcdRD5ET1F3yn9v2Hbd93GrLjZx85egofNm5f37bDy574Hhfjt3DpteUq/cv3/J8eTopciP1gXKXI8Vt41AcWpV/dSV07TWPF3ed2UkJVPn4xVO/7LK9vS3Ki94lWlR3fffddzHNiZ52dnZ+meDbb7+VC0ZFKY9Vd3369CmmYHV8a2sr9rwfP35Ud33//fc9q7rt7/ebjS9BkRt7h62ml2kuEXr4snNqVKv9w0+t7740+8X57rMjB3t//pH7XfcZdw/k2fzkY+VkuVeugENxaBUzF9V/2ovF1mru22eqm7VkPsxfu3RnNeOea/Mfgv+l33/WDv3w4UPMZRKfqrsajUbUocfHx7/UIg8MT5Z4MPX64fMKcsGoW8Xm6ngYSEqEqIQV+k5uNzMCwB9++MHEoXLNRv9SwTU/O8qhRy0v5lD5Kdb2Mxz6CYfiUHp/vK3XEpmKSYf46uMyXb3T//Xk1kV1qMSDoUNbrVZUl/KoH7r86le/ih4PM3e5ER6MZvphsCns7e1FE/nk+RKH7h+7knFL+bjf06jc8Is6VAz4bdeAqvx46Mr15afcPmrGHdrVqCNPjUMBhxrEp3vbztyUhKVq5GpIDu0FoaFOT345T4fGEvZUh8bcJ0rtxfKuK7+Gd0no2us/abdDvUpMGgab8nThydG+gvAi0Sc99Q9e2//hoNXoRo6pPZW5Dm37/sd+z4Bk4tGLyO3w16hDVYmeiUMBh2YiOX7z6a20aVIREQY3I5GkkuDqnfA7Tr37eo+QMy4FB3vnnVLo+Uo0dKiYLnZX0qEiyjDRFlXFHCe/fvr0KRmKhlILu0SPjo5i6b8KOaP9p9EOgfhrdjzVfZk6npPr0EB/XxzVtdr0Mkeoorl8v2O0FXaM4lDAoUa49YVwJOqURFfvXLt27bQRA1GeWFVpMXxANA6N5/XZnaZn6FCR4+fPn79ECHUWOjTaExpGoFHkYChZuVrMmGGoG2ouPPng4CDWUZB6/d5rbnqqB9NrF4lDDwIFO3IFsaTmnVEO/a4bq+4e9Ez6pf8QHAo41Ahvc9WpXfU2VmJJuCh0flUNB6UasB9apjo0IttzD0SjYztZhA4V04XuS0205eC3334bc2g0epXbYXa/s7MTXnB3d7fTHe5Xv8pdsc7ZhN0ckVeB/lB5yN5hbyw+1sWZ7tDuSL3IWqX/3UGn4IU5OBRwqCH+fkPKad2p0XQ1GhQZE+om+L1cXu/Q08q8IA7dPk3SoeEgu5VDoxm6PF04yiSpvYhSzZFSM5zCroAff/wx6wW3PF/1TjqFxuWtHfrFUaNM3R6AXseo2/aJQwGHFpGp8t2d+Ug0On8n0vUZmlAbhyYi14vgUIkNPc9rR0gO74S5vCjPPJcXxIlhvBk6Tk1dCqdzfvnyJZxzGpuQHyK5+6fujE5NGl52Lu8c9kfq94972b2k9mpiKQ4FHGos0L3t5uMbSninekL7t+PdoSkO7XvyQvaHfvgQl3hyTEnUJvZUBz9+/KgfU3IcJ+rWWP+AqFaU3UkbX0rO9j95SYHFHFFY2/cLO9RqTCnqUDG4qDM6yoRDAYfavID7V4Iv48dG5E8iyOAOlch3+0ovne4s7d2bCEo7F2Rc3nB+aGxuUziFMzm3KWrY6AynMCBVJ4hJQy+HI/4a90kJv0oURa6jLhh+vSqcX5UIZi3mNkUdGu1JaOBQwKG2nIwsDczFnB9aYI69mFHNsY999TOZjIc5e3QgXiHXj96V+j13r+2HX/fsTokPvuEuybUamReBijHVfNWw7zXLxR2bOfYxh3YiX5rCoYBDz5FR+p7SIN/1PFFPf8w9+Z2lcKgqeVe/l6DXDdqIfDVTJCjWU0FuzMKxzgR56V+Ogq85+adVaPJdz6RD5SLyvKo3AIcCDjXCXat5W6/H8uMf6pojUaJ9qTEpR2Pb5NeT/P4oUCyJliMq75aXHb7UkOjLkORdLR0S60U1WXMk6VB1Qbla2BuAQ3EoDtXRWpwOlyUdP4a69t3pWNIP18GLDjfp71JBaLjKXFjUqnTR1yTR8Y8//vjx40d5Jck5A5LzuxlL2OWufZc6k9/1WPsOcKgZrI0PtAjAoXZ460vO3FRkaj3AiLUIwz26C+8Brn868ycd8PWX8jpxaMn4h3ut5ZlwdVGAEW0RoS804sh16EQ2uXpKejD6QKsL4tCL7lBvc1W8ycr2MAYOndCil5S5YmKPjV4/63mzfmqulnXNshxailLHyKFe09t67dYXTOPN/YaoU9123zyS/H1cB46gmnFobkKdpbABk/fkZZOxZ+rLMAlCB7SeSUBdLYeK9YItPNdqzSc35QQpztyURrIn+3+8esCWSjCuDs0NQlODwSyvGfZ1atSZK0fzRH5wh5LLB/2V3saK+/Je8/EN5c1oCR0qp6nNk3vSrC8c378yxrOUAIfaWsOkw9TEyFHtas7UJPip4k6NlHHoQDVGMm7n4fWkN2NFjae3d99HN6AHqIhDC/SHZonM0DtRe3a0fZ0dywkDsYsUNqDhsFgl4lC1cXxreUYy8VSB6nJ5gOrFoSZBmd4pVj2kqQFmanRpMiivd6i5B62mXo1/Lh/i7227b5+1Fqed2lUcCjjUNuwyz+VN7kr1Xe7Qv2Ec2jHot8WhA/2rG2Tu9YXW89uS7NO6AIeaJMIDptudvAGi1Otouk31A/odgymoOHS4mQsADh22Q22tp7ebPhq1ms1KfygOBchvERMGZPlIn/WbXC3WJZqacec6tKzYkzgUhwLQIkYAHAqAQwGHAuBQwKHUGABaBA6lxgDQInAoNQaAFpGH4TdBc88fxmqhOBSHAoyYQ03me+JQHApQ3RZhPgX1bFaDxqE4FGBUW4SV6Ya0GjQOxaEAI9kiDJc1KXE1aByKQwHGpEUUWGl08NWgcSgOBRiHFpG7ZL0+CC28GjQOxaEAI98iDDdBKnzNEbInDgXAoYOm8wP2h5LL41CA6jrU8EhZK5niUBwKgENxKA4FoEXk7RA3pNWgcSgOBaBFjBU4FACHAg4FqBhHX19uPr0VltbyjPvqQVi89aX2Tl0KbxQOxaEA6S1CWVIVkWbUoa0Xd5Vb5TSndjWQ7Iu7gVs3VxErDgUAixbhOweBZDdWArcuz4hPxapKrO5aTazqH+7xfuJQABxqh4jVffNIrOrMTTmzkxKoimdFuLy3OBQAh9ohoai3vtRanD6+f6X1/Lb79hnBKQ4FwKFFkOxeYlJJ9kWpItaO1+TdxqEAONRWpU1J7YPO09lJt76ASXEoAA4tQnunLgFpz6SAQwFwaBGT7r4PJks9vtFuvOPNx6EAOLRQfr+56tSuEpDiUAAcWhB/vyHRqPvyHh8BDgXAocXC0abz8Lq3scKngEMBcGgR2o13Eo3yKeBQABxa9AXcv8KEJxwKgEOL4O83nLkpPgUcCoBDi9BanHbXanwKOBQAh1rjvrzXfHKTRB6HAuBQyxTeOVDLkrK8Ew4FwKGW4Wd9IZhgTwqPQwFwqBXe+pIzN9V6ftvf2+adx6EAONQ0cw9iz9lJSd7ZQQSHAuBQ48BzY6W1PBOsx7w8gz1xKEAlHeo1va3X5uuD+PsN9+0ztZS9BJ6SvzNwhEMBquVQsZ63uequ1ZpPbsoJwaaempnwXvNkS6WH14MeT7ZUwqEAVXNosBXSxkowZ/PxDeXNaFEOVfsniy5Ptvacm+pt7dndMFmCUN5SHApQLYeKEyV+THozqdFgf/nF6WDr+TePlE+ZIY9DAYhDg07MYD9OScZnJ7MEynuFQ3EoQH6L8Pe21aCQJOk4FIfiUIDiLaK9+96tL7Se35Zkn/cKh+JQAFoEDqXGANAicCg1BoAWATgUAIcCDgXAoYBDqTEAtAgcSo0BuBAtYmJiwupStucbXif3sgWeV/8UmgtG7yrr78WhADi0ZKdYqWoiQupBdXwiQdYVNKcN6e/FoQDj79AsswxDKJrLJn2nOTPrhOTt2Gn6P1CjYxwKgEPTHZHqoIlsihkz94KxpzZRrSa6zJVp8kmJQ3EogF0cqndoroDKzeWTz6iRY/KnSYid9S9B1jOWEoriUAAcej4OzX09+l5Ow06JrEeVFY3iUAAcerEcGlVnJ6Ojc8IAvYuJQwFw6NAdamIZc52ZW88k6zePRofaK4pDAXDoQA4tFodmiSx3SMrQ3bmvCocC4FAjiw2Yy5fl0KyTc32XG4fmPikOxaEAdg7Vj8kYptWDCDT3sZpZnybz5E2ydXOx4lAAHGoUcA1vRr15AJt1cmrUbDUKZD4EX9YEexwKMG5xKJwxOBQAhwIOBcChgEOpMQC0CBxKjQGgReBQagwALSIbk+F+qzWSrb4dj0NxKMAItwhDOWatnxRTp36FUByKQwHGqkWkTsU3mRWv+UYpDsWhABVyqCau1BjTZH1lcnkcClAhh2oWFkk1o0nKP1rgUAAcOpQ4tGO2s1PuF/lxKA4FGDeHavZKyo1JU6/WGcGeUBwKgENLiEM7eV2fuQ88s91GcSgAXESHGrpPs1K9Pt/HoTgUoKIOzQ1FiUNxKEDlHJqVp6eOFKWeg0NxKABxaM4ovCYazR19YlwehwLQIsYfHAqAQwGHAuBQwKHUGABaBA6lxgDQInAoNQaAFgE4FACHnj8f5q9durPavbl659LExMSla/Mfss8N7pT/9R6BQ3EoQAVbRMSbEUSh2frsnXBi24tvURwKgEPP0KHpYk0EoYa+xaE4FGDEWkRXgvPz19SXiE4UFxzvJuk97Yn/Ir8qdfbPUURd2lfrKYWOhERxKAAOtXVoX2yBJ5UIT26d3IyGnOHt5I2YQk9FqXlRKw7FoQDFOPr6cvPprbC0lmfcVw/C4q0vtXfqUobj0H5smC7EfvCod2j07vBmRMWjEojiUIBRjUOVJVURaUYd2npxV7lVTnNqVwPJvrgbuHVzdVCxpprxlOrSgso020aPnQS2p5WJQ3EowDm3CN85CCS7sRK4dXlGfCpWVWJ112piVf9wb1CHFolDO/2B90gfaCJ3x6E4FOCCtggRq/vmkVjVmZtyZiclUBXPinCLODSzP1Sf9XclOh8ZRqI/FIcCjGKLkFDUW19qLU4f37/Sen7bffssMzhNd2hyXL53SI6cyutjVly90zshXZqMy+NQgFFrEZLdS0wqyb4oVcTa8ZpD/DMSgSbzQ3EowFi0CK8pqX3QeTo76dYXhmTStFyd7ynhUIAxahHtnboEpD2TlqzPS5fSJHnyffkLH4TiUAAcambS3ffBZKnHN9qNd7z5OBQAhxbK7zdXndrVkgNSHIpDAarTIvz9hkSj7st7fAQ4FACHFgtHm87D697GCp8CDgXAoUVoN95JNMqngEMBcGjRF3D/ynCnjuJQHAowri3C3284c1N8CjgUAIcWobU47a7V+BRwKAAOtcZ9ea/55CaJPA4FwKGWKbxzoJYlzV/eCYdSYwBoEafCz/pCMMGeFH7MHDoxMWF40OqEUh6SehGF+R9S7A8s8TUDDvXWl5y5qdbz2/7eNu/8GMahSVOYODSps4nTJI/YKsnk4ann5D5dMYeiVBxqm7kHsefspCTvQ9maCYeee43JVV7yeFQlWfJNPWFAARkKMfYCbOU4YQCVHofmB54bK63lmWA95uUZ7Dn+cajGfcnjeoHqpTxgEKrRWa7cTS5OIo9DT4uw6W29Nl8fxN9vuG+fqaXsJfCU/J2Bo8rl8lkOSio11T5RkSXjwWJKyg1pi0WOpUgWxs+hYj1vc9VdqzWf3JQTgk09NTPhvebJlkoPrwc9noZbKsE4OTQ3kc8KS03uHdxBxbSYm9HrXwxhaaUcGmyFtLESzNl8fEN5M1qUQ9X+yaLLk60956Z6W3t2N0yWIJS3tIoOjZouV44mDtVfcBhxqJVDTYyc+y8KjI1DxYkSPya9mdRosL/84nSw9fybR8qnzJDHoTkm7diPtKRaLCuwNR8ZN7Fe6isxjCVT7UwcWpE4VOLHYD9OScZnJ7MEynuFQ40c2jHoytQHg7ldAfpk2TAgNTmhsEP17qa6j2UuH+LvbatBIUnScSgOLe5Qc2Fppk/mzg81UVKBQfkB41D9vxBU9/F2aJT27nu3vtB6fluSfd4rHGqay+uDOH3y28keQSrFR1kPye29te0ZwKE4FHCotUNjXaJZGXfWgHVq+j9gOmw7P9RkNlXhOJRcHocCDqXGANAicCg1BoAWgUOpMQC0CMChADgUcCgADgUcegY1xnA9zRKXvOsUXcRTP0OLQXbAoTj0fGqMyTz8ch2qv6DekjgUcCgOvRA1xnxxuQIrIheOSWPPYjgpFYECDsWh51xjNPFdiYvYW60KmhufsjQ94FAcep41psD31rP0WmIur4lG9b0Q5osDAA4FHHpGceiQ3GSyeGjWMqA4FHAoDj3/GlOgP7TAaqHFHJq1cj4OBRyKQ0evxiRXbjYJG22trV8zH4cCDsWhF67G2I7t6PN92zWczOPQTt7ypjgUcCgOPR+HdgyWGc3dHLSAuQrk8h2bDZ+pxzgUcOgoObSwQDuWy87rdy1lhhMOBRx6FjXGdjnkrAcWe15DXWY9CjkCDsWh1BgAWgQOpcYA0CJgRB169PXl5tNbYWktz7ivHoTFW19q79Sl8IkCDgUcml5jlCVVEWlGHdp6cVe5NdhQu3Y1kOyLu4FbN1cRK+BQwKEWNcZ3DgLJbqwEbl2eEZ+KVZVY3bWaWNU/3OODBxwKONQOEav75pFY1ZmbcmYnJVAVz4pwqQSAQwGH2iGhqLe+1FqcPr5/pfX8tvv2GcEp4FDAoUWQ7F5iUkn2Raki1o7XpFoADgUcaqvSpqT2Qefp7KRbX8CkgEMBhxahvVOXgLRnUgAcCji0iEl33weTpR7faDfeUUuAFgE4tFB+v7nq1K4SkAItAnBoQfz9hkSj7st71BWgRQAOLRaONp2H172NFaoL0CIAhxah3Xgn0SjVBWgRgEOLvoD7V5jwBLQIwKFF8PcbztwU1QVoEYBDi9BanHbXalQXoEUADrXGfXmv+eQmiTzQIgCHWqbwzoFalpTlnYAWATjUMvysLwQT7EnhgRYBONQKb33JmZtqPb/t721TRYAWATjUNHMPYs/ZSUne2UEEaBGAQ40Dz42V1vJMsB7z8gz2BFoEVNKhXtPbem2+Poi/33DfPlNL2UvgKfk7A0eAQ6FaDhXreZur7lqt+eSmnBBs6qmZCe81T7ZUeng96PFkSyXAoVA1hwZbIW2sBHM2H99Q3owW5VC1f7Lo8mRrz7mp3tae3Q2TJQjlswccCtVyqDhR4sekN5MaDfaXX5wOtp5/80j5lBnygEOBODToxAz245RkfHYyS6B8qIBDAYfm1xh/b1sNCkmSjkMBhwIOLV5j2rvv3fpC6/ltSfb5UAGHAg6lxgDQInAoNQaAFoFDqTEAtAjAoQA4FHAoANAicCg1BoAWgUOpMQC0CBxKjQHAoYBDAXAo4FBqDAAtAodSYwBoERXg/wFomg7V85uj/AAAAABJRU5ErkJggg==" alt="使用wait和notify进行线程交互"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">charactor</span><span class="token punctuation">;</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Hero</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">float</span> hp<span class="token punctuation">;</span>
 
    <span class="token keyword">public</span> <span class="token keyword">int</span> damage<span class="token punctuation">;</span>
 
    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        hp <span class="token operator">=</span> hp <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s 回血1点,增加血后，%s的血量是%.0f%n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 通知那些等待在this对象上的线程，可以醒过来了，如第20行，等待着的减血线程，苏醒过来</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">hurt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>hp <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// 让占有this的减血线程，暂时释放对this的占有，并等待</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// TODO Auto-generated catch block</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
 
        hp <span class="token operator">=</span> hp <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s 减血1点,减少血后，%s的血量是%.0f%n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attackHero</span><span class="token punctuation">(</span><span class="token class-name">Hero</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        h<span class="token punctuation">.</span>hp <span class="token operator">-=</span> damage<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%s 正在攻击 %s, %s的血变成了 %.0f%n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> h<span class="token punctuation">.</span>name<span class="token punctuation">,</span> h<span class="token punctuation">.</span>name<span class="token punctuation">,</span> h<span class="token punctuation">.</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>h<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;死了！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span> <span class="token operator">&gt;=</span> hp <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
<span class="token punctuation">}</span>
</code></pre></div><p><strong>测试类</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
      
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span></span><span class="token class-name">GradientPaint</span><span class="token punctuation">;</span>
    
<span class="token keyword">import</span> <span class="token namespace">charactor<span class="token punctuation">.</span></span><span class="token class-name">Hero</span><span class="token punctuation">;</span>
      
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
      
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
        <span class="token keyword">final</span> <span class="token class-name">Hero</span> gareen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;盖伦&quot;</span><span class="token punctuation">;</span>
        gareen<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">616</span><span class="token punctuation">;</span>
             
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                       
                    <span class="token comment">//无需循环判断</span>
<span class="token comment">//                    while(gareen.hp==1){</span>
<span class="token comment">//                        continue;</span>
<span class="token comment">//                    }</span>
                       
                    gareen<span class="token punctuation">.</span><span class="token function">hurt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                     
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// TODO Auto-generated catch block</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
   
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
        <span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    gareen<span class="token punctuation">.</span><span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// TODO Auto-generated catch block</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
   
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             
    <span class="token punctuation">}</span>
          
<span class="token punctuation">}</span>
</code></pre></div><h3 id="关于wait、notify和notifyall"><a href="#关于wait、notify和notifyall" class="header-anchor">#</a> 关于wait、notify和notifyAll</h3> <p>留意wait()和notify() 这两个方法是什么对象上的？</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">hurt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  。。。
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  。。。
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   。。。
   <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里需要强调的是，wait方法和notify方法，并<strong>不是Thread线程上的方法</strong>，它们是Object上的方法。</p> <p>因为所有的Object都可以被用来作为同步对象，所以准确的讲，wait和notify是同步对象上的方法。</p> <p>wait()的意思是： 让占用了这个同步对象的<strong>线程</strong>，临时释放当前的占用，并且等待。 所以调用wait是有前提条件的，一定是在synchronized块里，否则就会出错。</p> <p>notify() 的意思是，通知<strong>一个</strong>等待在这个同步对象上的线程，<strong>你</strong>可以苏醒过来了，有机会重新占用当前对象了。</p> <p>notifyAll() 的意思是，通知<strong>所有的</strong>等待在这个同步对象上的线程，<strong>你们</strong>可以苏醒过来了，有机会重新占用当前对象了。</p> <h2 id="线程池"><a href="#线程池" class="header-anchor">#</a> 线程池</h2> <p>每一个线程的启动和结束都是比较消耗时间和占用资源的。</p> <p>如果在系统中用到了很多的线程，大量的启动和结束动作会导致系统的性能变卡，响应变慢。</p> <p>为了解决这个问题，引入线程池这种设计思想。</p> <p>线程池的模式很像生产者消费者模式，消费的对象是一个一个的能够运行的<strong>任务</strong></p> <h3 id="线程池设计思路"><a href="#线程池设计思路" class="header-anchor">#</a> 线程池设计思路</h3> <p>线程池的思路和<a href="https://how2j.cn/k/thread/thread-wait-notify/358.html#step2591" target="_blank" rel="noopener noreferrer">生产者消费者模型<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是很接近的。
1.准备一个任务容器
2.一次性启动10个 消费者线程
3.刚开始任务容器是空的，所以线程都<strong>wait</strong>在上面。
4.直到一个外部线程往这个任务容器中扔了一个“任务”，就会有一个消费者线程被<a href="https://how2j.cn/k/thread/thread-wait-notify/358.html#step796" target="_blank" rel="noopener noreferrer">唤醒notify<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
5.这个消费者线程取出“任务”，并且<strong>执行这个任务</strong>，执行完毕后，继续等待下一次任务的到来。
6.如果短时间内，有较多的任务加入，那么就会有多个线程被<strong>唤醒</strong>，去执行这些任务。</p> <p>在整个过程中，都不需要创建新的线程，而是<strong>循环使用这些已经存在的线程</strong></p> <p><img src="/docs/assets/img/2600.27aeb9c9.png" alt="线程池设计思路"></p> <h3 id="开发一个自定义线程池"><a href="#开发一个自定义线程池" class="header-anchor">#</a> 开发一个自定义线程池</h3> <p>这是一个自定义的线程池，虽然不够完善和健壮，但是已经足以说明线程池的工作原理</p> <p>缓慢的给这个线程池添加任务，会看到有多条线程来执行这些任务。
线程7执行完毕任务后，<strong>又回到池子里</strong>，下一次任务来的时候，线程7又来执行新的任务。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
  
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">LinkedList</span><span class="token punctuation">;</span>
  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadPool</span> <span class="token punctuation">{</span>
  
    <span class="token comment">// 线程池大小</span>
    <span class="token keyword">int</span> threadPoolSize<span class="token punctuation">;</span>
  
    <span class="token comment">// 任务容器</span>
    <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span> tasks <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
    <span class="token comment">// 试图消费任务的线程</span>
  
    <span class="token keyword">public</span> <span class="token class-name">ThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        threadPoolSize <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  
        <span class="token comment">// 启动10个任务消费者线程</span>
        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>tasks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> threadPoolSize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">new</span> <span class="token class-name">TaskConsumeThread</span><span class="token punctuation">(</span><span class="token string">&quot;任务消费者线程 &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>tasks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            tasks<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 唤醒等待的任务消费者线程</span>
            tasks<span class="token punctuation">.</span><span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">class</span> <span class="token class-name">TaskConsumeThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">TaskConsumeThread</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
  
        <span class="token class-name">Runnable</span> task<span class="token punctuation">;</span>
  
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;启动： &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>tasks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">while</span> <span class="token punctuation">(</span>tasks<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">try</span> <span class="token punctuation">{</span>
                            tasks<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token comment">// TODO Auto-generated catch block</span>
                            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                    task <span class="token operator">=</span> tasks<span class="token punctuation">.</span><span class="token function">removeLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// 允许添加任务的线程可以继续添加任务</span>
                    tasks<span class="token punctuation">.</span><span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; 获取到任务，并执行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                task<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span>
</code></pre></div><p><strong>测试类</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
       
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ThreadPool</span> pool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Runnable</span> task <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">//System.out.println(&quot;执行任务&quot;);</span>
                    <span class="token comment">//任务可能是打印一句话</span>
                    <span class="token comment">//可能是访问文件</span>
                    <span class="token comment">//可能是做排序</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
             
            pool<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
             
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// TODO Auto-generated catch block</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
  
    <span class="token punctuation">}</span>
           
<span class="token punctuation">}</span>
</code></pre></div><h3 id="测试线程池"><a href="#测试线程池" class="header-anchor">#</a> 测试线程池</h3> <p>创造一个情景，每个任务执行的时间都是1秒
刚开始是间隔1秒钟向线程池中添加任务</p> <p>然后间隔时间越来越短，执行任务的线程还没有来得及结束，新的任务又来了。
就会观察到线程池里的其他线程被唤醒来执行这些任务</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ThreadPool</span> pool<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> sleep<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            pool<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">//System.out.println(&quot;执行任务&quot;);</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// TODO Auto-generated catch block</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span>sleep<span class="token punctuation">)</span><span class="token punctuation">;</span>
                sleep <span class="token operator">=</span> sleep<span class="token operator">&gt;</span><span class="token number">100</span><span class="token operator">?</span>sleep<span class="token operator">-</span><span class="token number">100</span><span class="token operator">:</span>sleep<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// TODO Auto-generated catch block</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
              
        <span class="token punctuation">}</span>
          
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用java自带线程池"><a href="#使用java自带线程池" class="header-anchor">#</a> 使用java自带线程池</h3> <p>java提供自带的线程池，而不需要自己去开发一个自定义线程池了。</p> <p>线程池类<strong>ThreadPoolExecutor</strong>在包<strong>java.util.concurrent</strong>下</p> <div class="language- extra-class"><pre class="language-text"><code>ThreadPoolExecutor threadPool= new ThreadPoolExecutor(10, 15, 60, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;());
</code></pre></div><p><strong>第一个</strong>参数10 表示这个线程池<strong>初始化了10个</strong>线程在里面工作
<strong>第二个</strong>参数15 表示如果10个线程不够用了，就会自动增加到<strong>最多15个线程</strong> <strong>第三个</strong>参数60 结合第四个参数TimeUnit.SECONDS，表示经过<strong>60秒</strong>，多出来的线程还没有接到活儿，就会回收，最后保持池子里就10个
<strong>第四个</strong>参数TimeUnit.SECONDS 如上
<strong>第五个</strong>参数 new LinkedBlockingQueue() 用来放任务的集合</p> <p><strong>execute</strong>方法用于添加新的任务</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">multiplethread</span><span class="token punctuation">;</span>
   
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">LinkedBlockingQueue</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeUnit</span><span class="token punctuation">;</span>
   
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThread</span> <span class="token punctuation">{</span>
   
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
           
        <span class="token class-name">ThreadPoolExecutor</span> threadPool<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">LinkedBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           
        threadPool<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// TODO Auto-generated method stub</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;任务1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
               
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token punctuation">}</span>
   
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/java/引用类型.html" class="prev">
        引用类型
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.7890f91e.js" defer></script><script src="/docs/assets/js/2.a8bc3a53.js" defer></script><script src="/docs/assets/js/28.6b5d3991.js" defer></script>
  </body>
</html>
